<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¹ãƒšã‚¤ãƒ³èªãƒãƒ£ãƒƒãƒˆãƒœãƒƒã‚¯ã‚¹</title>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #4361ee;
            --primary-light: #5a7cff;
            --secondary: #3f37c9;
            --accent: #4895ef;
            --light: #f8f9fa;
            --dark: #212529;
            --success: #4cc9f0;
            --warning: #f72585;
            --info: #7209b7;
            --text: #2b2d42;
            --text-light: #4a4d6b;
            --bg: #f8f9fa;
            --card-bg: #ffffff;
            --dark-bg: #1a1a2e;
            --dark-card: #16213e;
            --dark-text: #e6e6e6;
            --dark-text-light: #b8b8b8;
            --border-radius: 12px;
            --box-shadow: 0 4px 20px rgba(0,0,0,0.08);
            --transition: all 0.3s ease;
        }
        
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Poppins', 'Noto Sans JP', sans-serif;
        }
        
        body {
            background-color: var(--bg);
            color: var(--text);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            min-height: 100vh;
            width: 100vw;
            padding: 20px;
            font-size: 16px;
            transition: var(--transition);
            line-height: 1.6;
        }
        
        body.dark-mode {
            background-color: var(--dark-bg);
            color: var(--dark-text);
        }
        
        .container {
            width: 95%;
            max-width: 1200px;
            text-align: center;
            background-color: var(--card-bg);
            border-radius: var(--border-radius);
            box-shadow: var(--box-shadow);
            padding: 60px 40px;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
            font-size: 1.2rem;
        }
        
        body.dark-mode .container {
            background-color: var(--dark-card);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }
        
        .header {
            font-size: 2.2rem;
            font-weight: 700;
            color: var(--primary);
            margin-bottom: 30px;
            text-align: center;
            letter-spacing: -0.5px;
        }
        
        body.dark-mode .header {
            color: var(--accent);
        }
        
        .controls-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 25px;
            gap: 20px;
        }
        
        .dropdown {
            flex: 1;
            min-width: 0;
            position: relative;
        }
        
        select {
            width: 100%;
            padding: 15px 20px;
            font-size: 1rem;
            border-radius: var(--border-radius);
            border: 2px solid var(--primary);
            background-color: var(--card-bg);
            color: var(--text);
            cursor: pointer;
            appearance: none;
            transition: var(--transition);
        }
        
        select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
        }
        
        body.dark-mode select {
            background-color: var(--dark-card);
            color: var(--dark-text);
            border-color: var(--accent);
        }
        
        .dropdown:after {
            content: "â–¼";
            font-size: 0.8rem;
            color: var(--primary);
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
        }
        
        body.dark-mode .dropdown:after {
            color: var(--accent);
        }
        
        .file-upload-row {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
            gap: 20px;
        }
        
        .file-input-container {
            flex: 1;
            position: relative;
            min-width: 0;
        }
        
        .file-input-label {
            display: block;
            width: 100%;
            padding: 15px 20px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: var(--border-radius);
            background-color: var(--primary);
            color: white;
            cursor: pointer;
            text-align: center;
            transition: var(--transition);
            border: 2px solid transparent;
        }
        
        .file-input-label:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
        }
        
        .file-input-label:active {
            transform: translateY(0);
        }
        
        body.dark-mode .file-input-label {
            background-color: var(--accent);
        }
        
        body.dark-mode .file-input-label:hover {
            background-color: var(--primary-light);
        }
        
        #fileNameDisplay {
            font-size: 0.9rem;
            margin-top: 10px;
            color: var(--text-light);
            text-align: center;
        }
        
        body.dark-mode #fileNameDisplay {
            color: var(--dark-text-light);
        }
        
        .btn {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 15px 20px;
            font-size: 1rem;
            font-weight: 600;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: var(--transition);
            flex: 1;
            min-width: 0;
            border: 2px solid transparent;
        }
        
        .btn:hover {
            background-color: var(--primary-light);
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.2);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            background-color: var(--text-light);
        }
        
        body.dark-mode .btn:disabled {
            background-color: var(--dark-text-light);
        }
        
        body.dark-mode .btn {
            background-color: var(--accent);
        }
        
        body.dark-mode .btn:hover {
            background-color: var(--primary-light);
        }
        
        .night-mode-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: var(--dark);
            color: white;
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            transition: var(--transition);
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        
        .night-mode-toggle:hover {
            transform: scale(1.1);
        }
        
        body.dark-mode .night-mode-toggle {
            background-color: var(--light);
            color: var(--dark);
        }

        /* READING MODE STYLES */
        .reading-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            background-color: var(--card-bg);
            color: var(--text);
            z-index: 100;
            overflow: hidden;
            padding: 15px;
            box-sizing: border-box;
            transition: var(--transition);
        }
        
        body.dark-mode .reading-container {
            background-color: var(--dark-card);
            color: var(--dark-text);
        }
        
        /* Ensure all elements in reading mode respect dark mode */
        body.dark-mode .reading-header,
        body.dark-mode .reading-footer {
            background-color: var(--dark-card);
            color: var(--dark-text);
        }
        
        body.dark-mode .sentence-display {
            color: var(--dark-text);
        }
        
        body.dark-mode .fruit-toggle {
            background-color: var(--success);
        }
        
        body.dark-mode .exit-reading {
            background-color: var(--warning);
        }
        
        .reading-header {
            display: flex;
            justify-content: space-between;
            padding: 15px;
            align-items: center;
            position: relative;
        }
        
        .page-counter {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 0.9rem;
            color: var(--text-light);
            font-weight: 600;
        }
        
        body.dark-mode .page-counter {
            color: var(--dark-text-light);
        }
        
        .exit-reading {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            top: 15px;
            background-color: var(--warning);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 1.2rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 10;
        }
        
        .fruit-toggle {
            background-color: var(--warning);
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            cursor: pointer;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            flex-shrink: 0; /* Prevent button from growing */
            margin: 0 5px; /* Add some horizontal spacing */
        }
        
        .fruit-toggle.on {
            background-color: var(--success);
        }
        
        .reel-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }
        
        .fruit-name {
            font-size: 1.2rem;
            height: 30px;
            text-align: center;
            color: var(--primary);
            font-weight: bold;
            min-width: 100px;
        }
        
        .reading-content {
            display: flex;
            flex-direction: column;
            width: 100%;
            height: calc(100% - 120px); /* Reduced to account for smaller footer */
            padding: 0 20px;
            overflow: hidden;
            margin-bottom: 60px; /* Space for fixed footer */
        }
        
        .sentence-row {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            padding: 10px 20px; /* More side padding */
            width: 100%;
            overflow: hidden;
            min-height: 0;
            box-sizing: border-box;
            max-height: 50vh; /* Prevent overlap with header/footer */
        }
        
        .sentence-row:first-child {
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        body.dark-mode .sentence-row:first-child {
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }
        
        .sentence-controls {
            display: flex;
            align-items: center;
            gap: 10px;
            width: 100%;
            position: relative;
        }
        
        .play-btn {
            background-color: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            min-width: 40px;
            border-radius: 50%;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
            margin-right: 10px;
        }
        
        /* Update the sentence display to take remaining space */
        .sentence-display {
            font-size: 5vw;
            line-height: 1.4;
            text-align: left;
            word-break: break-word;
            overflow: hidden;
            width: 100%;
            display: flex;
            flex-direction: column;
            justify-content: center;
            padding: 5px;
            box-sizing: border-box;
            white-space: normal;
            min-height: 0;
            flex: 1;
            max-height: 100%;
            text-overflow: ellipsis;
        }
        
        .reading-footer {
            display: flex;
            justify-content: space-between;
            padding: 10px;
            align-items: center;
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            z-index: 10;
            background-color: var(--card-bg);
            box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
            transition: background-color 0.3s;
            height: 60px; /* Reduced height */
            gap: 10px; /* Add space between items */
        }
        
        body.dark-mode .reading-footer {
            background-color: var(--dark-card);
            box-shadow: 0 -5px 15px rgba(0,0,0,0.3);
        }
        
        .nav-btn {
            flex-shrink: 0; /* Prevent buttons from growing */
            background-color: var(--primary);
            color: white;
            border: none;
            width: 50px; /* Reduced size */
            height: 50px; /* Reduced size */
            border-radius: 50%;
            font-size: 1.2rem; /* Smaller font */
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: all 0.2s;
            position: relative;
            z-index: 20;
            margin: 0 10px; /* Added some spacing */
        }
        
        .nav-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 15px rgba(0,0,0,0.3);
        }
        
        .nav-btn:active {
            transform: scale(0.98);
        }
        
        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }
        
        /* Translation Popup Styles */
        .translation-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 800px;
            background-color: var(--card-bg);
            color: var(--text);
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            z-index: 1000;
            padding: 30px;
            display: none;
            max-height: 90vh;
            overflow-y: auto;
            transition: background-color 0.3s, color 0.3s;
        }
        
        body.dark-mode .translation-popup {
            background-color: var(--dark-card);
            color: var(--dark-text);
        }
        
        .language-label {
            font-size: 1.2rem;
            margin-bottom: 5px;
            color: var(--primary);
            font-weight: bold;
        }
        
        body.dark-mode .language-label {
            color: var(--accent);
        }
        
        .translation-original {
            font-size: 2.5rem !important;
            margin-bottom: 20px !important;
            padding: 20px !important;
            background-color: rgba(0,0,0,0.05) !important;
            border-radius: 12px !important;
        }
        
        .translation-result {
            font-size: 2.5rem !important;
            padding: 20px !important;
            background-color: rgba(67, 97, 238, 0.1) !important;
            border-radius: 12px !important;
        }
        
        .translation-tts {
            font-size: 2rem !important;
            padding: 15px 25px !important;
            margin-top: 25px !important;
        }
        
        .translation-popup-header h3 {
            font-size: 2.5rem !important;
        }
        
        .translation-popup-close {
            width: 50px !important;
            height: 50px !important;
            font-size: 2rem !important;
        }
        
        .translation-popup.active {
            display: block;
        }
        
        .translation-popup-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(0,0,0,0.1);
        }
        
        .translation-popup-close {
            background-color: var(--warning);
            color: white;
            border: none;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            font-size: 1rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .translation-content {
            margin-bottom: 15px;
        }
        
        .translation-original {
            font-size: 1.5rem;
            margin-bottom: 10px;
            padding: 10px;
            background-color: rgba(0,0,0,0.05);
            border-radius: 8px;
        }
        
        .translation-result {
            font-size: 1.5rem;
            padding: 10px;
            background-color: rgba(67, 97, 238, 0.1);
            border-radius: 8px;
        }
        
        .translation-tts {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            margin-top: 15px;
        }
        
        .translation-tts:hover {
            background-color: var(--secondary);
        }
        
        .translation-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.5);
            z-index: 999;
            display: none;
        }
        
        .translation-overlay.active {
            display: block;
        }
        
        @media (max-width: 768px) {
            .translation-popup {
                width: 95%;
                padding: 15px;
                max-height: 80vh;
            }
            
            .translation-original, .translation-result {
                font-size: 1.2rem !important;
                padding: 10px !important;
            }
            
            .translation-popup-header h3 {
                font-size: 1.5rem !important;
            }
            
            .translation-tts {
                font-size: 1rem !important;
                padding: 10px 15px !important;
            }
        }
        
        /* Fruit Game Styles */
        .fruit-game-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 200;
        }
        
        .fruit-game {
            background-color: var(--card-bg);
            color: var(--text);
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            max-width: 800px;
            width: 90%;
            transition: var(--transition);
        }
        
        body.dark-mode .fruit-game {
            background-color: var(--dark-card);
            color: var(--dark-text);
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }
        
        .fruit-reels {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }
        
        .fruit-reel {
            font-size: 8rem;  /* Increased from 4rem */
            width: 150px;     /* Increased from 100px */
            height: 150px;    /* Increased from 100px */
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--card-bg);
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transition: var(--transition);
        }
        
        body.dark-mode .fruit-reel {
            background-color: var(--dark-card);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        
        /* Confetti animation */
        @keyframes confetti-fall {
            0% {
                transform: translateY(-10px) rotate(0deg);
                opacity: 0.8;
            }
            100% {
                transform: translateY(100vh) rotate(360deg);
                opacity: 0;
            }
        }
        
        /* Shake animation */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-5px); }
            20%, 40%, 60%, 80% { transform: translateX(5px); }
        }
        
        @media (max-width: 800px) {
            .sentence-display {
                font-size: 32px !important; /* Minimum readable size */
            }
            
            .controls-row, .file-upload-row {
                flex-direction: column;
            }
            
            select, .btn, .file-input-label {
                font-size: 1.2rem;
                padding: 12px;
            }
            
            .header {
                font-size: 2rem;
                margin-bottom: 20px;
            }
            
            .fruit-reels {
                flex-wrap: wrap;  /* Allow reels to wrap on small screens */
                gap: 10px;
            }
            
            .fruit-reel {
                font-size: 4rem;  /* Slightly smaller */
                width: 90px;      /* Reduced from 120px */
                height: 90px;     /* Reduced from 120px */
            }
            
            .reel-container {
                margin-bottom: 15px;
            }
        }
        
        @media (max-width: 768px) {
            .sentence-row {
                flex-direction: row;
                align-items: center;
                padding: 5px;
            }
            
            .play-btn {
                width: 32px;
                height: 32px;
                font-size: 0.8rem;
                margin-right: 8px;
            }
            
            .sentence-display {
                font-size: 1.5rem !important;  /* Increased from 1rem */
                padding: 5px;
                line-height: 1.4;
                min-height: 60px;  /* Ensure enough space for tapping */
            }
            
            .sentence-row {
                min-height: 80px;  /* More space for each sentence */
            }
            
            .container {
                padding: 30px 20px;
                width: 100%;
            }
            
            .controls-row, .file-upload-row {
                flex-direction: column;
                gap: 15px;
            }
            
            .header {
                font-size: 1.8rem;
                margin-bottom: 25px;
            }
            
            select, .btn, .file-input-label {
                padding: 12px 15px;
                font-size: 0.9rem;
            }
            
            .night-mode-toggle {
                width: 40px;
                height: 40px;
                font-size: 1rem;
            }
        }
        
        @media (min-width: 1280px) {
            .nav-btn {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
            
            .reading-footer {
                height: 70px;
            }
            
            .reading-content {
                height: calc(100% - 130px);
                margin-bottom: 70px;
            }
        }
        
        /* Main container - only affects home screen */
        #mainContainer.container {
            width: 95%;
            max-width: 1200px; /* Increased from 800px */
            padding: 60px 40px; /* Increased padding */
            font-size: 1.2rem; /* Base font size increase */
        }
        
        /* Only target header in main container */
        #mainContainer .header {
            font-size: 4rem; /* Increased from 2.2rem */
            margin-bottom: 50px; /* Increased from 30px */
        }
        
        /* Only target dropdowns in main container */
        #mainContainer .controls-row {
            display: flex;
            flex-direction: column; /* Stack vertically */
            margin-bottom: 25px;
            gap: 30px; /* Increased gap */
        }
        
        #mainContainer select {
            padding: 25px 30px; /* Increased from 15px 20px */
            font-size: 1.8rem; /* Increased from 1rem */
            border-width: 3px; /* Thicker border */
        }
        
        #mainContainer .dropdown:after {
            font-size: 1.5rem; /* Increased from 0.8rem */
            right: 30px; /* Adjusted position */
        }
        
        /* Larger screens adjustment */
        @media (min-width: 1024px) {
            #mainContainer .header {
                font-size: 5rem;
                margin-bottom: 60px;
            }
            
            #mainContainer select {
                padding: 30px 35px;
                font-size: 2rem;
            }
            
            #mainContainer .dropdown:after {
                font-size: 2rem;
                right: 35px;
            }
        }
        
        /* Japanese specific styles */
        .japanese-text {
            font-family: 'Noto Sans JP', sans-serif;
        }
        
        .japanese-font {
            font-family: 'Noto Sans JP', sans-serif;
        }
    </style>
</head>
<body>
    <button class="night-mode-toggle" id="nightModeToggle">ğŸŒ™</button>
    <div class="container" id="mainContainer">
        <div class="header japanese-font">ã‚¹ãƒšã‚¤ãƒ³èªãƒãƒ£ãƒƒãƒˆãƒœãƒƒã‚¯ã‚¹</div>
        
        <div class="controls-row">
            <div class="dropdown">
                <select id="contentSelector" class="japanese-font">
                    <option value="">ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’é¸æŠ</option>
                    <option value="questions">è³ªå•</option>
                    <option value="stories">ã‚¹ãƒˆãƒ¼ãƒªãƒ¼</option>
                </select>
            </div>
            
            <div class="dropdown">
                <select id="storySelector" disabled class="japanese-font">
                    <option value="">ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’é¸æŠ</option>
                </select>
            </div>
        </div>
    </div>

    <!-- READING MODE CONTAINER -->
    <div class="reading-container" id="readingModeContainer" style="display: none;">
        <div class="reading-header">
            <div class="page-counter japanese-font">ãƒšãƒ¼ã‚¸ <span id="currentPage">1</span> / <span id="totalPages">1</span></div>
            <button id="exitReading" class="exit-reading">X</button>
        </div>
        
        <div class="reading-content">
            <div class="sentence-row">
                <div class="sentence-controls">
                    <button id="playSpanish" class="play-btn">â–¶</button>
                    <div id="spanishSentence" class="sentence-display"></div>
                </div>
            </div>
            
            <div class="sentence-row">
                <div class="sentence-controls">
                    <button id="playJapanese" class="play-btn">â–¶</button>
                    <div id="japaneseSentence" class="sentence-display japanese-font"></div>
                </div>
            </div>
        </div>
        
        <div class="reading-footer">
            <button id="prevSentence" class="nav-btn">â†</button>
            <button id="fruitToggle" class="fruit-toggle japanese-font">ãƒ•ãƒ«ãƒ¼ãƒ„ã‚²ãƒ¼ãƒ  OFF</button>
            <button id="nextSentence" class="nav-btn">â†’</button>
        </div>
    </div>

    <!-- Translation Popup -->
    <div class="translation-overlay" id="translationOverlay"></div>
    <div class="translation-popup" id="translationPopup">
        <div class="translation-popup-header">
            <h3 class="japanese-font">ç¿»è¨³</h3>
            <button class="translation-popup-close" id="closeTranslationPopup">Ã—</button>
        </div>
        <div class="translation-content">
            <div class="language-label japanese-font" id="sourceLanguageLabel">ã‚¹ãƒšã‚¤ãƒ³èª:</div>
            <div class="translation-original" id="translationOriginal"></div>
            
            <div class="language-label japanese-font" id="targetLanguageLabel">æ—¥æœ¬èª:</div>
            <div class="translation-result japanese-font" id="translationResult"></div>
            
            <button class="translation-tts japanese-font" id="translationTts">
                <span>ğŸ”Š éŸ³å£°å†ç”Ÿ</span>
            </button>
        </div>
    </div>
    
    <script>
        // Spanish-Japanese content
        const spanishContent = {
            questions: `#QUESTIONS  
ğŸ¶Â¿CÃ³mo te llamÃ¡s?  
ã‚ãªãŸã®åå‰ã¯ä½•ã§ã™ã‹ï¼Ÿ  
ğŸ˜ŠÂ¿CÃ³mo estÃ¡s hoy?  
ä»Šæ—¥ã®èª¿å­ã¯ã©ã†ã§ã™ã‹ï¼Ÿ  
ğŸ‚Â¿CuÃ¡ntos aÃ±os tienes?  
ä½•æ­³ã§ã™ã‹ï¼Ÿ  
ğŸ Â¿DÃ³nde vives?  
ã©ã“ã«ä½ã‚“ã§ã„ã¾ã™ã‹ï¼Ÿ  
ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦Â¿CuÃ¡ntas personas hay en tu familia?  
å®¶æ—ã¯ä½•äººã§ã™ã‹ï¼Ÿ  
ğŸ±Â¿Tienes una mascota?  
ãƒšãƒƒãƒˆã‚’é£¼ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ  
ğŸŒˆÂ¿CuÃ¡l es tu color favorito?  
å¥½ããªè‰²ã¯ä½•ã§ã™ã‹ï¼Ÿ  
ğŸÂ¿Te gustan las manzanas?  
ãƒªãƒ³ã‚´ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ•Â¿CuÃ¡l es tu comida favorita?  
å¥½ããªé£Ÿã¹ç‰©ã¯ä½•ã§ã™ã‹ï¼Ÿ  
ğŸ®Â¿Te gustan los videojuegos?  
ãƒ†ãƒ¬ãƒ“ã‚²ãƒ¼ãƒ ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
âš½Â¿Practicas deportes?  
ã‚¹ãƒãƒ¼ãƒ„ã‚’ã—ã¾ã™ã‹ï¼Ÿ  
ğŸ“ºÂ¿CuÃ¡l es tu programa de TV favorito?  
å¥½ããªãƒ†ãƒ¬ãƒ“ç•ªçµ„ã¯ä½•ã§ã™ã‹ï¼Ÿ  
ğŸµÂ¿Te gusta la mÃºsica?  
éŸ³æ¥½ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ“šÂ¿Te gusta leer libros?  
æœ¬ã‚’èª­ã‚€ã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
âœï¸Â¿CuÃ¡l es tu materia favorita en la escuela?  
å­¦æ ¡ã§å¥½ããªç§‘ç›®ã¯ä½•ã§ã™ã‹ï¼Ÿ  
ğŸ›ï¸Â¿A quÃ© hora te duermes?  
ä½•æ™‚ã«å¯ã¾ã™ã‹ï¼Ÿ  
â˜€ï¸Â¿Prefieres el sol o la lluvia?  
æ™´ã‚Œã¨é›¨ã€ã©ã¡ã‚‰ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¦Â¿Te gusta el helado?  
ã‚¢ã‚¤ã‚¹ã‚¯ãƒªãƒ¼ãƒ ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¨Â¿Te gusta dibujar?  
çµµã‚’æãã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸš²Â¿Sabes andar en bicicleta?  
è‡ªè»¢è»Šã«ä¹—ã‚Œã¾ã™ã‹ï¼Ÿ  
ğŸ»Â¿CuÃ¡l es tu animal favorito?  
å¥½ããªå‹•ç‰©ã¯ä½•ã§ã™ã‹ï¼Ÿ  
ğŸ­Â¿Te gusta disfrazarte?  
ä»®è£…ã™ã‚‹ã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ–ï¸Â¿Prefieres la playa o la montaÃ±a?  
æµ·ã¨å±±ã€ã©ã¡ã‚‰ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸŒÂ¿Te gustan los plÃ¡tanos?  
ãƒãƒŠãƒŠã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ“±Â¿Tienes un telÃ©fono?  
æºå¸¯é›»è©±ã‚’æŒã£ã¦ã„ã¾ã™ã‹ï¼Ÿ  
ğŸˆÂ¿QuÃ© haces en tu cumpleaÃ±os?  
èª•ç”Ÿæ—¥ã«ä½•ã‚’ã—ã¾ã™ã‹ï¼Ÿ  
ğŸ¦·Â¿Se te ha caÃ­do algÃºn diente?  
æ­¯ãŒæŠœã‘ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸ§©Â¿Te gustan los rompecabezas?  
ãƒ‘ã‚ºãƒ«ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸš—Â¿Te gustan los coches?  
è»Šã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ‘‘Â¿QuiÃ©n es tu superhÃ©roe favorito?  
å¥½ããªã‚¹ãƒ¼ãƒ‘ãƒ¼ãƒ’ãƒ¼ãƒ­ãƒ¼ã¯èª°ã§ã™ã‹ï¼Ÿ  
ğŸ¤Â¿Te gusta cantar?  
æ­Œã†ã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ§¸Â¿Tienes un peluche favorito?  
å¥½ããªã¬ã„ãã‚‹ã¿ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸ¿Â¿Te gusta el cine?  
æ˜ ç”»é¤¨ã«è¡Œãã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ§Â¿Prefieres pastel o galletas?  
ã‚±ãƒ¼ã‚­ã¨ã‚¯ãƒƒã‚­ãƒ¼ã€ã©ã¡ã‚‰ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸš€Â¿Quieres viajar al espacio?  
å®‡å®™ã«è¡ŒããŸã„ã§ã™ã‹ï¼Ÿ  
ğŸ°Â¿Te gustan los cuentos de hadas?  
ãŠã¨ãè©±ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¸Â¿Tocas algÃºn instrumento?  
æ¥½å™¨ã‚’æ¼”å¥ã—ã¾ã™ã‹ï¼Ÿ  
ğŸŒ®Â¿Te gustan los tacos?  
ã‚¿ã‚³ã‚¹ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¯Â¿Eres bueno en los juegos?  
ã‚²ãƒ¼ãƒ ãŒå¾—æ„ã§ã™ã‹ï¼Ÿ  
ğŸ‘ŸÂ¿Te gusta correr?  
èµ°ã‚‹ã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ“Â¿CuÃ¡l es tu fruta favorita?  
å¥½ããªæœç‰©ã¯ä½•ã§ã™ã‹ï¼Ÿ  
ğŸ²Â¿Te gustan los juegos de mesa?  
ãƒœãƒ¼ãƒ‰ã‚²ãƒ¼ãƒ ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¦¸â€â™‚ï¸Â¿QuÃ© quieres ser de grande?  
å¤§ãããªã£ãŸã‚‰ä½•ã«ãªã‚ŠãŸã„ã§ã™ã‹ï¼Ÿ  
ğŸªÂ¿Te gusta hornear galletas?  
ã‚¯ãƒƒã‚­ãƒ¼ã‚’ç„¼ãã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸŒÂ¿Hablas otro idioma?  
ä»–ã®è¨€èªã‚’è©±ã—ã¾ã™ã‹ï¼Ÿ  
ğŸªÂ¿Te gusta el circo?  
ã‚µãƒ¼ã‚«ã‚¹ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ›’Â¿Te gusta ir de compras?  
è²·ã„ç‰©ã«è¡Œãã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ­Â¿Te gusta actuar?  
æ¼”æŠ€ã™ã‚‹ã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¦œÂ¿Puedes imitar animales?  
å‹•ç‰©ã®ã¾ã­ãŒã§ãã¾ã™ã‹ï¼Ÿ  
ğŸ¨Â¿CuÃ¡l es tu arte favorito?  
å¥½ããªèŠ¸è¡“ã¯ä½•ã§ã™ã‹ï¼Ÿ  
ğŸš‚Â¿Te gustan los trenes?  
é›»è»Šã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¯Â¿Te gusta la miel?  
ã¯ã¡ã¿ã¤ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¡Â¿Te gusta la feria?  
éŠåœ’åœ°ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ§¦Â¿Tienes calcetines divertidos?  
é¢ç™½ã„é´ä¸‹ã‚’æŒã£ã¦ã„ã¾ã™ã‹ï¼Ÿ  
ğŸ·Â¿Te gusta el jazz?  
ã‚¸ãƒ£ã‚ºã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ‰Â¿Prefieres sandÃ­a o melÃ³n?  
ã‚¹ã‚¤ã‚«ã¨ãƒ¡ãƒ­ãƒ³ã€ã©ã¡ã‚‰ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ†Â¿Has ganado un premio?  
è³ã‚’ã‚‚ã‚‰ã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸ¦•Â¿Te gustan los dinosaurios?  
æç«œã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ£Â¿Te gusta pescar?  
é‡£ã‚Šã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ©Â¿Te gustan las donas?  
ãƒ‰ãƒ¼ãƒŠãƒ„ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ Â¿Te gustan los carruseles?  
ãƒ¡ãƒªãƒ¼ã‚´ãƒ¼ãƒ©ãƒ³ãƒ‰ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ§€Â¿Te gusta el queso?  
ãƒãƒ¼ã‚ºã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ³Â¿Juegas boliche?  
ãƒœã‚¦ãƒªãƒ³ã‚°ã‚’ã—ã¾ã™ã‹ï¼Ÿ  
ğŸ™ï¸Â¿Te gusta hablar en pÃºblico?  
äººå‰ã§è©±ã™ã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¥‘Â¿Te gusta el aguacate?  
ã‚¢ãƒœã‚«ãƒ‰ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ†Â¿Te gustan los fuegos artificiales?  
èŠ±ç«ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ§ŠÂ¿Prefieres calor o frÃ­o?  
æš‘ã„ã®ã¨å¯’ã„ã®ã€ã©ã¡ã‚‰ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ„Â¿Te gusta la Navidad?  
ã‚¯ãƒªã‚¹ãƒã‚¹ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¦¸â€â™€ï¸Â¿Tienes un poder imaginario?  
æƒ³åƒä¸Šã®è¶…èƒ½åŠ›ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸÂ¿Te gusta la piÃ±a?  
ãƒ‘ã‚¤ãƒŠãƒƒãƒ—ãƒ«ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¹Â¿Sabes tocar el piano?  
ãƒ”ã‚¢ãƒã‚’å¼¾ã‘ã¾ã™ã‹ï¼Ÿ  
ğŸï¸Â¿Te gustarÃ­a vivir en una isla?  
å³¶ã«ä½ã¿ãŸã„ã§ã™ã‹ï¼Ÿ  
ğŸ«Â¿Prefieres chocolate blanco o negro?  
ãƒ›ãƒ¯ã‚¤ãƒˆãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã¨ãƒ€ãƒ¼ã‚¯ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã€ã©ã¡ã‚‰ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ­Â¿Te gusta el teatro?  
åŠ‡å ´ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¦„Â¿Crees en unicornios?  
ãƒ¦ãƒ‹ã‚³ãƒ¼ãƒ³ã‚’ä¿¡ã˜ã¾ã™ã‹ï¼Ÿ  
ğŸ¢Â¿Te gustan las montaÃ±as rusas?  
ã‚¸ã‚§ãƒƒãƒˆã‚³ãƒ¼ã‚¹ã‚¿ãƒ¼ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¥Â¿Te gustan los panqueques?  
ãƒ‘ãƒ³ã‚±ãƒ¼ã‚­ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ°Â¿Has jugado en un casino (de juguete)?  
(ãŠã‚‚ã¡ã‚ƒã®)ã‚«ã‚¸ãƒã§éŠã‚“ã ã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸªÂ¿Te gusta volar cometas?  
ãŸã“ã‚’é£›ã°ã™ã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ‡Â¿Te gustan las luces brillantes?  
æ˜ã‚‹ã„å…‰ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ’Â¿Te gustan las cerezas?  
ã•ãã‚‰ã‚“ã¼ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ³Â¿Eres bueno en boliche?  
ãƒœã‚¦ãƒªãƒ³ã‚°ãŒå¾—æ„ã§ã™ã‹ï¼Ÿ  
ğŸ›ŒÂ¿Duermes con un peluche?  
ã¬ã„ãã‚‹ã¿ã¨ä¸€ç·’ã«å¯ã¾ã™ã‹ï¼Ÿ  
ğŸ¸Â¿Te gusta la guitarra?  
ã‚®ã‚¿ãƒ¼ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ„Â¿Te gustan los hongos?  
ã‚­ãƒã‚³ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ²Â¿Te gustan los dados?  
ã‚µã‚¤ã‚³ãƒ­ã‚²ãƒ¼ãƒ ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¦€Â¿Te gustan los cangrejos?  
ã‚«ãƒ‹ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ§Â¿Escuchas mÃºsica con audÃ­fonos?  
ãƒ˜ãƒƒãƒ‰ãƒ›ãƒ³ã§éŸ³æ¥½ã‚’è´ãã¾ã™ã‹ï¼Ÿ  
ğŸ‡Â¿Prefieres uvas verdes o moradas?  
ç·‘ã®ã¶ã©ã†ã¨ç´«ã®ã¶ã©ã†ã€ã©ã¡ã‚‰ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ Â¿Te gustan los tiovivos?  
ãƒ¡ãƒªãƒ¼ã‚´ãƒ¼ãƒ©ãƒ³ãƒ‰ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ§ƒÂ¿Prefieres jugo o leche?  
ã‚¸ãƒ¥ãƒ¼ã‚¹ã¨ç‰›ä¹³ã€ã©ã¡ã‚‰ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¯Â¿Eres bueno en dardos?  
ãƒ€ãƒ¼ãƒ„ãŒå¾—æ„ã§ã™ã‹ï¼Ÿ  
ğŸ¦Â¿Te gustan los leones?  
ãƒ©ã‚¤ã‚ªãƒ³ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¤Â¿Has cantado en un micrÃ³fono?  
ãƒã‚¤ã‚¯ã§æ­Œã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸ¿Â¿Prefieres palomitas dulces o saladas?  
ç”˜ã„ãƒãƒƒãƒ—ã‚³ãƒ¼ãƒ³ã¨å¡©å‘³ã®ãƒãƒƒãƒ—ã‚³ãƒ¼ãƒ³ã€ã©ã¡ã‚‰ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¨Â¿Pintas con acuarelas?  
æ°´å½©çµµã®å…·ã§çµµã‚’æãã¾ã™ã‹ï¼Ÿ  
ğŸ¦‰Â¿Te gustan los bÃºhos?  
ãƒ•ã‚¯ãƒ­ã‚¦ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ³Â¿Has hecho un strike en boliche?  
ãƒœã‚¦ãƒªãƒ³ã‚°ã§ã‚¹ãƒˆãƒ©ã‚¤ã‚¯ã‚’å–ã£ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸÂ¿Te gusta el pan tostado?  
ãƒˆãƒ¼ã‚¹ãƒˆã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¸Â¿Tienes una banda imaginaria?  
æƒ³åƒä¸Šã®ãƒãƒ³ãƒ‰ã¯ã‚ã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸªÂ¿Te gustan los payasos?  
ãƒ”ã‚¨ãƒ­ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸÂ¿Te gusta la piÃ±a en la pizza?  
ãƒ”ã‚¶ã«ãƒ‘ã‚¤ãƒŠãƒƒãƒ—ãƒ«ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ®Â¿Prefieres videojuegos o deportes?  
ãƒ†ãƒ¬ãƒ“ã‚²ãƒ¼ãƒ ã¨ã‚¹ãƒãƒ¼ãƒ„ã€ã©ã¡ã‚‰ãŒå¥½ãã§ã™ã‹ï¼Ÿ`,
            stories: {
                story1: `#STORY
ğŸ‘‹ Fernando saluda a los niÃ±os.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯å­ä¾›ãŸã¡ã«æŒ¨æ‹¶ã—ã¾ã™ã€‚  
ğŸ Fernando tiene una manzana roja.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯èµ¤ã„ãƒªãƒ³ã‚´ã‚’æŒã£ã¦ã„ã¾ã™ã€‚  
ğŸ‘§ Emika mira la manzana.  
ã‚¨ãƒŸã‚«ã¯ãƒªãƒ³ã‚´ã‚’è¦‹ã¾ã™ã€‚  
â“ "Â¿QuÃ© es esto?" pregunta Emika.  
ã€Œã“ã‚Œã¯ä½•ã§ã™ã‹ï¼Ÿã€ã¨ã‚¨ãƒŸã‚«ã¯å°‹ã­ã¾ã™ã€‚  
ğŸ—£ï¸ "Es una manzana," dice Fernando.  
ã€Œãã‚Œã¯ãƒªãƒ³ã‚´ã§ã™ã€ã¨ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯è¨€ã„ã¾ã™ã€‚  
ğŸ˜‹ Emika prueba la manzana.  
ã‚¨ãƒŸã‚«ã¯ãƒªãƒ³ã‚´ã‚’å‘³è¦‹ã—ã¾ã™ã€‚  
ğŸ‘ "Â¡Me gusta!" dice Emika.  
ã€ŒãŠã„ã—ã„ï¼ã€ã¨ã‚¨ãƒŸã‚«ã¯è¨€ã„ã¾ã™ã€‚  
ğŸ Fernando muestra una manzana verde.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯ç·‘ã®ãƒªãƒ³ã‚´ã‚’è¦‹ã›ã¾ã™ã€‚  
ğŸ¤” Emika mira las dos manzanas.  
ã‚¨ãƒŸã‚«ã¯2ã¤ã®ãƒªãƒ³ã‚´ã‚’è¦‹ã¾ã™ã€‚  
ğŸ˜Š Fernando sonrÃ­e.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯å¾®ç¬‘ã¿ã¾ã™ã€‚  

#QUESTIONS
ğŸ Â¿Te gustan las manzanas rojas?  
èµ¤ã„ãƒªãƒ³ã‚´ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ Â¿Prefieres manzanas verdes o rojas?  
ç·‘ã®ãƒªãƒ³ã‚´ã¨èµ¤ã„ãƒªãƒ³ã‚´ã€ã©ã¡ã‚‰ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ‘… Â¿Quieres probar una manzana?  
ãƒªãƒ³ã‚´ã‚’é£Ÿã¹ã¦ã¿ãŸã„ã§ã™ã‹ï¼Ÿ  
ğŸ—£ï¸ Â¿Puedes decir "manzana" en espaÃ±ol?  
ã‚¹ãƒšã‚¤ãƒ³èªã§ã€Œmanzanaã€ã¨è¨€ãˆã¾ã™ã‹ï¼Ÿ  
ğŸ¨ Â¿De quÃ© color es tu fruta favorita?  
ã‚ãªãŸã®å¥½ããªæœç‰©ã¯ä½•è‰²ã§ã™ã‹ï¼Ÿ  
ğŸ˜‹ Â¿QuÃ© frutas te gustan?  
ã©ã‚“ãªæœç‰©ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ‘€ Â¿Ves manzanas en tu escuela?  
å­¦æ ¡ã§ãƒªãƒ³ã‚´ã‚’è¦‹ã¾ã™ã‹ï¼Ÿ  
ğŸ¤² Â¿Compartes comida con amigos?  
å‹é”ã¨é£Ÿã¹ç‰©ã‚’åˆ†ã‘åˆã„ã¾ã™ã‹ï¼Ÿ  
ğŸ Â¿CuÃ¡ntas manzanas comes cada dÃ­a?  
æ¯æ—¥ã„ãã¤ãƒªãƒ³ã‚´ã‚’é£Ÿã¹ã¾ã™ã‹ï¼Ÿ  
ğŸ˜Š Â¿SonrÃ­es cuando comes algo rico?  
ç¾å‘³ã—ã„ã‚‚ã®ã‚’é£Ÿã¹ã‚‹ã¨ç¬‘é¡”ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ`,
                story2: `#STORY
ğŸ¶ MarÃ­a ve un perro pequeÃ±o.  
ãƒãƒªã‚¢ã¯å°ã•ãªçŠ¬ã‚’è¦‹ã¾ã™ã€‚  
ğŸƒ El perro corre rÃ¡pido.  
çŠ¬ã¯é€Ÿãèµ°ã‚Šã¾ã™ã€‚  
ğŸ‘§ MarÃ­a quiere acariciar al perro.  
ãƒãƒªã‚¢ã¯çŠ¬ã‚’æ’«ã§ãŸã„ã§ã™ã€‚  
ğŸ–ï¸ "Â¿Puedo tocar?" pregunta MarÃ­a.  
ã€Œè§¦ã£ã¦ã‚‚ã„ã„ã§ã™ã‹ï¼Ÿã€ã¨ãƒãƒªã‚¢ã¯å°‹ã­ã¾ã™ã€‚  
ğŸ˜Š El dueÃ±o dice "SÃ­."  
é£¼ã„ä¸»ã¯ã€Œã¯ã„ã€ã¨è¨€ã„ã¾ã™ã€‚  
ğŸ• MarÃ­a acaricia al perro suavemente.  
ãƒãƒªã‚¢ã¯å„ªã—ãçŠ¬ã‚’æ’«ã§ã¾ã™ã€‚  
ğŸ‘¦ Kaito y Sorato miran.  
ã‚«ã‚¤ãƒˆã¨ã‚½ãƒ©ãƒˆã¯è¦‹ã¦ã„ã¾ã™ã€‚  
ğŸ¶ El perro mueve la cola.  
çŠ¬ã¯ã—ã£ã½ã‚’æŒ¯ã‚Šã¾ã™ã€‚  
ğŸ˜„ Todos rÃ­en.  
ã¿ã‚“ãªç¬‘ã„ã¾ã™ã€‚  
â¤ï¸ A MarÃ­a le encantan los perros.  
ãƒãƒªã‚¢ã¯çŠ¬ãŒå¤§å¥½ãã§ã™ã€‚  

#QUESTIONS
ğŸ¶ Â¿Te gustan los perros?  
çŠ¬ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ± Â¿Prefieres perros o gatos?  
çŠ¬ã¨çŒ«ã€ã©ã¡ã‚‰ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸƒ Â¿Puedes correr rÃ¡pido como un perro?  
çŠ¬ã®ã‚ˆã†ã«é€Ÿãèµ°ã‚Œã¾ã™ã‹ï¼Ÿ  
ğŸ–ï¸ Â¿Tocas animales con cuidado?  
å‹•ç‰©ã‚’å„ªã—ãè§¦ã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸ¨ Â¿De quÃ© color es tu animal favorito?  
å¥½ããªå‹•ç‰©ã¯ä½•è‰²ã§ã™ã‹ï¼Ÿ  
ğŸ˜Š Â¿SonrÃ­es cuando ves un perro?  
çŠ¬ã‚’è¦‹ã‚‹ã¨ç¬‘é¡”ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸ‘€ Â¿Ves perros en tu barrio?  
è¿‘æ‰€ã§çŠ¬ã‚’è¦‹ã¾ã™ã‹ï¼Ÿ  
ğŸ• Â¿Tienes una mascota?  
ãƒšãƒƒãƒˆã‚’é£¼ã£ã¦ã„ã¾ã™ã‹ï¼Ÿ  
ğŸ¤” Â¿QuÃ© animal quieres tocar?  
ã©ã‚“ãªå‹•ç‰©ã«è§¦ã‚ŠãŸã„ã§ã™ã‹ï¼Ÿ  
â¤ï¸ Â¿QuÃ© animal te encanta?  
ã©ã‚“ãªå‹•ç‰©ãŒå¤§å¥½ãã§ã™ã‹ï¼Ÿ`,
                story3: `#STORY
ğŸ‚ Es el cumpleaÃ±os de Haruki.  
ãƒãƒ«ã‚­ã®èª•ç”Ÿæ—¥ã§ã™ã€‚  
ğŸˆ Hay globos de colores.  
è‰²ã¨ã‚Šã©ã‚Šã®é¢¨èˆ¹ãŒã‚ã‚Šã¾ã™ã€‚  
ğŸ° Fernando trae un pastel grande.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯å¤§ããªã‚±ãƒ¼ã‚­ã‚’æŒã£ã¦ãã¾ã™ã€‚  
ğŸ•¯ï¸ Siete velas estÃ¡n en el pastel.  
ã‚±ãƒ¼ã‚­ã«ã¯7æœ¬ã®ã‚ã†ãããŒç«‹ã£ã¦ã„ã¾ã™ã€‚  
ğŸ‘§ Emika canta "Feliz CumpleaÃ±os."  
ã‚¨ãƒŸã‚«ã¯ã€Œãƒãƒƒãƒ”ãƒ¼ãƒãƒ¼ã‚¹ãƒ‡ãƒ¼ã€ã‚’æ­Œã„ã¾ã™ã€‚  
ğŸ˜Š Haruki sonrÃ­e mucho.  
ãƒãƒ«ã‚­ã¯ãŸãã•ã‚“ç¬‘ã„ã¾ã™ã€‚  
ğŸ‘ Todos aplauden.  
ã¿ã‚“ãªæ‹æ‰‹ã—ã¾ã™ã€‚  
ğŸ Haruki abre los regalos.  
ãƒãƒ«ã‚­ã¯ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚’é–‹ã‘ã¾ã™ã€‚  
âœï¸ Hay un nuevo lÃ¡piz azul.  
æ–°ã—ã„é’ã„é‰›ç­†ãŒã‚ã‚Šã¾ã™ã€‚  
â¤ï¸ Haruki estÃ¡ muy feliz.  
ãƒãƒ«ã‚­ã¯ã¨ã¦ã‚‚å¹¸ã›ã§ã™ã€‚  

#QUESTIONS
ğŸ‚ Â¿CuÃ¡ndo es tu cumpleaÃ±os?  
ã‚ãªãŸã®èª•ç”Ÿæ—¥ã¯ã„ã¤ã§ã™ã‹ï¼Ÿ  
ğŸˆ Â¿Te gustan los globos?  
é¢¨èˆ¹ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ° Â¿Prefieres pastel de chocolate o vainilla?  
ãƒãƒ§ã‚³ãƒ¬ãƒ¼ãƒˆã‚±ãƒ¼ã‚­ã¨ãƒãƒ‹ãƒ©ã‚±ãƒ¼ã‚­ã€ã©ã¡ã‚‰ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ•¯ï¸ Â¿CuÃ¡ntas velas hay en tu pastel?  
ã‚ãªãŸã®ã‚±ãƒ¼ã‚­ã«ã¯ä½•æœ¬ã‚ã†ãããŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸ Â¿QuÃ© regalo quieres?  
ã©ã‚“ãªãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆãŒæ¬²ã—ã„ã§ã™ã‹ï¼Ÿ  
ğŸ‘ Â¿Te gusta aplaudir?  
æ‹æ‰‹ã™ã‚‹ã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ˜Š Â¿SonrÃ­es en tu cumpleaÃ±os?  
èª•ç”Ÿæ—¥ã«ç¬‘é¡”ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ  
âœï¸ Â¿QuÃ© color de lÃ¡piz te gusta?  
ã©ã‚“ãªè‰²ã®é‰›ç­†ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ‘« Â¿Con quiÃ©n celebras tu cumpleaÃ±os?  
èª°ã¨èª•ç”Ÿæ—¥ã‚’ç¥ã„ã¾ã™ã‹ï¼Ÿ  
â¤ï¸ Â¿QuÃ© te hace feliz?  
ä½•ãŒã‚ãªãŸã‚’å¹¸ã›ã«ã—ã¾ã™ã‹ï¼Ÿ`,
                story4: `#STORY
â˜€ï¸ Hace sol en el parque.  
å…¬åœ’ã¯æ™´ã‚Œã¦ã„ã¾ã™ã€‚  
ğŸŒ³ Emika y MarÃ­a juegan bajo un Ã¡rbol.  
ã‚¨ãƒŸã‚«ã¨ãƒãƒªã‚¢ã¯æœ¨ã®ä¸‹ã§éŠã³ã¾ã™ã€‚  
ğŸ¦‹ Una mariposa azul vuela.  
é’ã„è¶ãŒé£›ã‚“ã§ã„ã¾ã™ã€‚  
ğŸ‘§ "Â¡Mira!" dice MarÃ­a.  
ã€Œè¦‹ã¦ï¼ã€ã¨ãƒãƒªã‚¢ã¯è¨€ã„ã¾ã™ã€‚  
ğŸƒ Las niÃ±as corren tras la mariposa.  
å¥³ã®å­ãŸã¡ã¯è¶ã‚’è¿½ã„ã‹ã‘ã¾ã™ã€‚  
ğŸŒ¸ La mariposa se posa en una flor.  
è¶ã¯èŠ±ã«æ­¢ã¾ã‚Šã¾ã™ã€‚  
ğŸ“¸ Fernando toma una foto.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯å†™çœŸã‚’æ’®ã‚Šã¾ã™ã€‚  
ğŸ˜Š Las niÃ±as observan en silencio.  
å¥³ã®å­ãŸã¡ã¯é™ã‹ã«è¦³å¯Ÿã—ã¾ã™ã€‚  
ğŸ¦‹ La mariposa vuela lejos.  
è¶ã¯é£›ã³å»ã‚Šã¾ã™ã€‚  
ğŸ‘‹ "AdiÃ³s, mariposa," dicen.  
ã€Œã•ã‚ˆã†ãªã‚‰ã€è¶ã•ã‚“ã€ã¨å½¼å¥³ãŸã¡ã¯è¨€ã„ã¾ã™ã€‚  

#QUESTIONS
ğŸ¦‹ Â¿Te gustan las mariposas?  
è¶ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¨ Â¿QuÃ© color de mariposa prefieres?  
ã©ã‚“ãªè‰²ã®è¶ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸƒ Â¿Corres en el parque?  
å…¬åœ’ã§èµ°ã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸŒ¸ Â¿Ves flores en el parque?  
å…¬åœ’ã§èŠ±ã‚’è¦‹ã¾ã™ã‹ï¼Ÿ  
â˜€ï¸ Â¿Te gusta cuando hace sol?  
æ™´ã‚Œã®æ—¥ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ‘€ Â¿QuÃ© animales ves en el parque?  
å…¬åœ’ã§ã©ã‚“ãªå‹•ç‰©ã‚’è¦‹ã¾ã™ã‹ï¼Ÿ  
ğŸ“¸ Â¿Te gusta tomar fotos?  
å†™çœŸã‚’æ’®ã‚‹ã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ˜Š Â¿Observas la naturaleza?  
è‡ªç„¶ã‚’è¦³å¯Ÿã—ã¾ã™ã‹ï¼Ÿ  
ğŸ‘« Â¿Con quiÃ©n juegas en el parque?  
èª°ã¨å…¬åœ’ã§éŠã³ã¾ã™ã‹ï¼Ÿ  
ğŸ‘‹ Â¿Dices "adiÃ³s" a los animales?  
å‹•ç‰©ã«ã€Œã•ã‚ˆã†ãªã‚‰ã€ã¨è¨€ã„ã¾ã™ã‹ï¼Ÿ`,
                story5: `#STORY
ğŸ“š Fernando lee un cuento.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯ç‰©èªã‚’èª­ã¿ã¾ã™ã€‚  
ğŸ‘§ğŸ‘¦ Los niÃ±os escuchan.  
å­ä¾›ãŸã¡ã¯èã„ã¦ã„ã¾ã™ã€‚  
ğŸ¦ El cuento es sobre un leÃ³n.  
ç‰©èªã¯ãƒ©ã‚¤ã‚ªãƒ³ã«ã¤ã„ã¦ã§ã™ã€‚  
ğŸ˜® Los ojos de MarÃ­a se abren grandes.  
ãƒãƒªã‚¢ã®ç›®ã¯å¤§ããè¦‹é–‹ã‹ã‚Œã¾ã™ã€‚  
ğŸ—£ï¸ "Â¡Rugido!" hace Fernando.  
ã€Œã‚¬ã‚ªãƒ¼ï¼ã€ã¨ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯è¨€ã„ã¾ã™ã€‚  
ğŸ˜‚ Todos rÃ­en.  
ã¿ã‚“ãªç¬‘ã„ã¾ã™ã€‚  
ğŸ–ï¸ Emika dibuja el leÃ³n.  
ã‚¨ãƒŸã‚«ã¯ãƒ©ã‚¤ã‚ªãƒ³ã‚’æãã¾ã™ã€‚  
ğŸ¨ Usa crayones amarillos.  
å½¼å¥³ã¯é»„è‰²ã®ã‚¯ãƒ¬ãƒ¨ãƒ³ã‚’ä½¿ã„ã¾ã™ã€‚  
ğŸ‘ Fernando muestra el dibujo.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯çµµã‚’è¦‹ã›ã¾ã™ã€‚  
ğŸ‘ Todos aplauden.  
ã¿ã‚“ãªæ‹æ‰‹ã—ã¾ã™ã€‚  

#QUESTIONS
ğŸ“š Â¿Te gustan los cuentos?  
ç‰©èªã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¦ Â¿QuÃ© animal te gusta en los cuentos?  
ç‰©èªã§ã©ã‚“ãªå‹•ç‰©ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ—£ï¸ Â¿Puedes hacer el sonido de un leÃ³n?  
ãƒ©ã‚¤ã‚ªãƒ³ã®é³´ãå£°ã‚’å‡ºã›ã¾ã™ã‹ï¼Ÿ  
ğŸ¨ Â¿Te gusta dibujar?  
çµµã‚’æãã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ–ï¸ Â¿QuÃ© color usas mucho?  
ã‚ˆãä½¿ã†è‰²ã¯ä½•ã§ã™ã‹ï¼Ÿ  
ğŸ‘‚ Â¿Escuchas cuentos en la escuela?  
å­¦æ ¡ã§ç‰©èªã‚’èãã¾ã™ã‹ï¼Ÿ  
ğŸ˜® Â¿Te sorprenden los cuentos?  
ç‰©èªã«é©šãã¾ã™ã‹ï¼Ÿ  
ğŸ‘ Â¿Aplaudes cuando algo es bueno?  
ä½•ã‹ãŒè‰¯ã„æ™‚ã«æ‹æ‰‹ã—ã¾ã™ã‹ï¼Ÿ  
ğŸ“– Â¿QuiÃ©n te lee cuentos?  
èª°ãŒã‚ãªãŸã«ç‰©èªã‚’èª­ã¿ã¾ã™ã‹ï¼Ÿ  
â¤ï¸ Â¿CuÃ¡l es tu cuento favorito?  
å¥½ããªç‰©èªã¯ä½•ã§ã™ã‹ï¼Ÿ`,
                story6: `#STORY
ğŸµ Fernando toca la guitarra.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯ã‚®ã‚¿ãƒ¼ã‚’å¼¾ãã¾ã™ã€‚  
ğŸ‘§ Emika canta una canciÃ³n.  
ã‚¨ãƒŸã‚«ã¯æ­Œã‚’æ­Œã„ã¾ã™ã€‚  
ğŸ‘ Los niÃ±os aplauden.  
å­ä¾›ãŸã¡ã¯æ‹æ‰‹ã—ã¾ã™ã€‚  
ğŸª‘ MarÃ­a se balancea en su silla.  
ãƒãƒªã‚¢ã¯æ¤…å­ã§æºã‚Œã¾ã™ã€‚  
ğŸ¶ Kaito toca las palmas.  
ã‚«ã‚¤ãƒˆã¯æ‰‹æ‹å­ã‚’ã—ã¾ã™ã€‚  
ğŸ˜Š Sorato sonrÃ­e y baila.  
ã‚½ãƒ©ãƒˆã¯ç¬‘ã£ã¦è¸Šã‚Šã¾ã™ã€‚  
ğŸ¤ Fernando canta mÃ¡s fuerte.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯ã‚‚ã£ã¨å¤§ããªå£°ã§æ­Œã„ã¾ã™ã€‚  
ğŸ‘« Todos cantan juntos.  
ã¿ã‚“ãªä¸€ç·’ã«æ­Œã„ã¾ã™ã€‚  
ğŸ‰ Es muy divertido.  
ã¨ã¦ã‚‚æ¥½ã—ã„ã§ã™ã€‚  
â¤ï¸ A todos les encanta la mÃºsica.  
ã¿ã‚“ãªéŸ³æ¥½ãŒå¤§å¥½ãã§ã™ã€‚  

#QUESTIONS
ğŸµ Â¿Te gusta la mÃºsica?  
éŸ³æ¥½ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ¤ Â¿Cantas en la escuela?  
å­¦æ ¡ã§æ­Œã‚’æ­Œã„ã¾ã™ã‹ï¼Ÿ  
ğŸ‘ Â¿Sigues el ritmo con palmas?  
æ‰‹æ‹å­ã§ãƒªã‚ºãƒ ã‚’å–ã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸª‘ Â¿Te mueves con la mÃºsica?  
éŸ³æ¥½ã«åˆã‚ã›ã¦å‹•ãã¾ã™ã‹ï¼Ÿ  
ğŸ¶ Â¿QuÃ© instrumento te gusta?  
ã©ã‚“ãªæ¥½å™¨ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ˜Š Â¿SonrÃ­es cuando escuchas mÃºsica?  
éŸ³æ¥½ã‚’èãã¨ç¬‘é¡”ã«ãªã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸ‘« Â¿Cantas con tus amigos?  
å‹é”ã¨ä¸€ç·’ã«æ­Œã„ã¾ã™ã‹ï¼Ÿ  
ğŸ‰ Â¿Es divertido cantar?  
æ­Œã†ã®ã¯æ¥½ã—ã„ã§ã™ã‹ï¼Ÿ  
â¤ï¸ Â¿QuÃ© canciÃ³n te encanta?  
ã©ã‚“ãªæ­ŒãŒå¤§å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸµ Â¿QuiÃ©n toca mÃºsica en tu familia?  
å®¶æ—ã§èª°ãŒéŸ³æ¥½ã‚’æ¼”å¥ã—ã¾ã™ã‹ï¼Ÿ`,
                story7: `#STORY
ğŸŒ§ï¸ EstÃ¡ lloviendo hoy.  
ä»Šæ—¥ã¯é›¨ãŒé™ã£ã¦ã„ã¾ã™ã€‚  
â˜” Emika usa un paraguas amarillo.  
ã‚¨ãƒŸã‚«ã¯é»„è‰²ã„å‚˜ã‚’ä½¿ã„ã¾ã™ã€‚  
ğŸ‘¢ MarÃ­a lleva botas de agua.  
ãƒãƒªã‚¢ã¯é•·é´ã‚’å±¥ã„ã¦ã„ã¾ã™ã€‚  
ğŸ’¦ Los niÃ±os saltan en los charcos.  
å­ä¾›ãŸã¡ã¯æ°´ãŸã¾ã‚Šã§è·³ã­ã¾ã™ã€‚  
ğŸ˜‚ Fernando se rÃ­e.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯ç¬‘ã„ã¾ã™ã€‚  
ğŸŒˆ Aparece un arcoÃ­ris.  
è™¹ãŒç¾ã‚Œã¾ã™ã€‚  
ğŸ‘§ "Â¡Mira!" grita Emika.  
ã€Œè¦‹ã¦ï¼ã€ã¨ã‚¨ãƒŸã‚«ã¯å«ã³ã¾ã™ã€‚  
ğŸ“¸ Fernando toma otra foto.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯ã‚‚ã†ä¸€æšå†™çœŸã‚’æ’®ã‚Šã¾ã™ã€‚  
ğŸŒ§ï¸ La lluvia se detiene.  
é›¨ãŒæ­¢ã¿ã¾ã™ã€‚  
ğŸ˜Š Todos estÃ¡n contentos.  
ã¿ã‚“ãªå¬‰ã—ãã†ã§ã™ã€‚  

#QUESTIONS
ğŸŒ§ï¸ Â¿Te gusta la lluvia?  
é›¨ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
â˜” Â¿Tienes un paraguas?  
å‚˜ã‚’æŒã£ã¦ã„ã¾ã™ã‹ï¼Ÿ  
ğŸ‘¢ Â¿Usas botas de agua?  
é•·é´ã‚’å±¥ãã¾ã™ã‹ï¼Ÿ  
ğŸ’¦ Â¿Saltas en los charcos?  
æ°´ãŸã¾ã‚Šã§è·³ã­ã¾ã™ã‹ï¼Ÿ  
ğŸŒˆ Â¿Has visto un arcoÃ­ris?  
è™¹ã‚’è¦‹ãŸã“ã¨ãŒã‚ã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸ¨ Â¿CuÃ¡ntos colores tiene el arcoÃ­ris?  
è™¹ã¯ä½•è‰²ã§ã™ã‹ï¼Ÿ  
ğŸ˜Š Â¿EstÃ¡s contento cuando sale el sol?  
å¤ªé™½ãŒå‡ºã‚‹ã¨å¬‰ã—ããªã‚Šã¾ã™ã‹ï¼Ÿ  
ğŸ“¸ Â¿Te gusta tomar fotos de la naturaleza?  
è‡ªç„¶ã®å†™çœŸã‚’æ’®ã‚‹ã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ‘« Â¿Juegas bajo la lluvia con amigos?  
å‹é”ã¨é›¨ã®ä¸­ã§éŠã³ã¾ã™ã‹ï¼Ÿ  
ğŸŒ§ï¸ Â¿QuÃ© haces en dÃ­as lluviosos?  
é›¨ã®æ—¥ã«ã¯ä½•ã‚’ã—ã¾ã™ã‹ï¼Ÿ`,
                story8: `#STORY
ğŸšŒ Los niÃ±os van de excursiÃ³n.  
å­ä¾›ãŸã¡ã¯é è¶³ã«è¡Œãã¾ã™ã€‚  
ğŸ›ï¸ Visitan un museo.  
åšç‰©é¤¨ã‚’è¨ªã‚Œã¾ã™ã€‚  
ğŸ¦– Ven dinosaurios grandes.  
å¤§ããªæç«œã‚’è¦‹ã¾ã™ã€‚  
ğŸ˜® Kaito abre mucho los ojos.  
ã‚«ã‚¤ãƒˆã¯ç›®ã‚’å¤§ããè¦‹é–‹ãã¾ã™ã€‚  
ğŸ“ Sorato escribe en su cuaderno.  
ã‚½ãƒ©ãƒˆã¯ãƒãƒ¼ãƒˆã«æ›¸ãã¾ã™ã€‚  
ğŸ“¸ Fernando toma muchas fotos.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯ãŸãã•ã‚“å†™çœŸã‚’æ’®ã‚Šã¾ã™ã€‚  
ğŸ›ï¸ Emika compra un recuerdo.  
ã‚¨ãƒŸã‚«ã¯ãŠåœŸç”£ã‚’è²·ã„ã¾ã™ã€‚  
ğŸšŒ Regresan al autobÃºs.  
ãƒã‚¹ã«æˆ»ã‚Šã¾ã™ã€‚  
ğŸ˜´ MarÃ­a estÃ¡ cansada.  
ãƒãƒªã‚¢ã¯ç–²ã‚Œã¦ã„ã¾ã™ã€‚  
ğŸ˜Š Pero todos estÃ¡n felices.  
ã§ã‚‚ã¿ã‚“ãªå¹¸ã›ã§ã™ã€‚  

#QUESTIONS
ğŸšŒ Â¿Te gustan las excursiones?  
é è¶³ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ›ï¸ Â¿QuÃ© lugar quieres visitar?  
ã©ã‚“ãªå ´æ‰€ã«è¡ŒããŸã„ã§ã™ã‹ï¼Ÿ  
ğŸ¦– Â¿Te gustan los dinosaurios?  
æç«œã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ“ Â¿Escribes sobre tus viajes?  
æ—…è¡Œã«ã¤ã„ã¦æ›¸ãã¾ã™ã‹ï¼Ÿ  
ğŸ“¸ Â¿Te gusta tomar fotos en excursiones?  
é è¶³ã§å†™çœŸã‚’æ’®ã‚‹ã®ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ›ï¸ Â¿Compras recuerdos?  
ãŠåœŸç”£ã‚’è²·ã„ã¾ã™ã‹ï¼Ÿ  
ğŸ˜´ Â¿Te cansas en las excursiones?  
é è¶³ã§ç–²ã‚Œã¾ã™ã‹ï¼Ÿ  
ğŸ˜Š Â¿QuÃ© te hace feliz en los viajes?  
æ—…è¡Œã§ä½•ãŒã‚ãªãŸã‚’å¹¸ã›ã«ã—ã¾ã™ã‹ï¼Ÿ  
ğŸ‘« Â¿Con quiÃ©n vas de excursiÃ³n?  
èª°ã¨é è¶³ã«è¡Œãã¾ã™ã‹ï¼Ÿ  
ğŸšŒ Â¿QuÃ© transporte usas?  
ã©ã‚“ãªäº¤é€šæ‰‹æ®µã‚’ä½¿ã„ã¾ã™ã‹ï¼Ÿ`,
                story9: `#STORY
ğŸ« Es el primer dÃ­a de escuela.  
å­¦æ ¡ã®åˆæ—¥ã§ã™ã€‚  
ğŸ‘§ MarÃ­a estÃ¡ nerviosa.  
ãƒãƒªã‚¢ã¯ç·Šå¼µã—ã¦ã„ã¾ã™ã€‚  
ğŸ‘¦ Kaito y Sorato sonrÃ­en.  
ã‚«ã‚¤ãƒˆã¨ã‚½ãƒ©ãƒˆã¯ç¬‘ã£ã¦ã„ã¾ã™ã€‚  
ğŸ–ï¸ Hay crayones nuevos.  
æ–°ã—ã„ã‚¯ãƒ¬ãƒ¨ãƒ³ãŒã‚ã‚Šã¾ã™ã€‚  
ğŸ“š Fernando muestra los libros.  
ãƒ•ã‚§ãƒ«ãƒŠãƒ³ãƒ‰ã¯æœ¬ã‚’è¦‹ã›ã¾ã™ã€‚  
ğŸµ Cantan una canciÃ³n.  
æ­Œã‚’æ­Œã„ã¾ã™ã€‚  
ğŸ‘« Emika ayuda a MarÃ­a.  
ã‚¨ãƒŸã‚«ã¯ãƒãƒªã‚¢ã‚’åŠ©ã‘ã¾ã™ã€‚  
ğŸ˜Š MarÃ­a ya no estÃ¡ nerviosa.  
ãƒãƒªã‚¢ã¯ã‚‚ã†ç·Šå¼µã—ã¦ã„ã¾ã›ã‚“ã€‚  
âœï¸ Todos escriben sus nombres.  
ã¿ã‚“ãªè‡ªåˆ†ã®åå‰ã‚’æ›¸ãã¾ã™ã€‚  
â¤ï¸ Es un buen primer dÃ­a.  
è‰¯ã„åˆæ—¥ã§ã™ã€‚  

#QUESTIONS
ğŸ« Â¿Te gusta la escuela?  
å­¦æ ¡ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ–ï¸ Â¿QuÃ© material escolar te gusta?  
ã©ã‚“ãªæ–‡æˆ¿å…·ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ“š Â¿Te gustan los libros nuevos?  
æ–°ã—ã„æœ¬ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸµ Â¿Cantas en la escuela?  
å­¦æ ¡ã§æ­Œã‚’æ­Œã„ã¾ã™ã‹ï¼Ÿ  
ğŸ‘« Â¿Ayudas a tus compaÃ±eros?  
ã‚¯ãƒ©ã‚¹ãƒ¡ãƒ¼ãƒˆã‚’åŠ©ã‘ã¾ã™ã‹ï¼Ÿ  
ğŸ˜Š Â¿Estabas nervioso el primer dÃ­a?  
åˆæ—¥ã¯ç·Šå¼µã—ã¾ã—ãŸã‹ï¼Ÿ  
âœï¸ Â¿Puedes escribir tu nombre?  
è‡ªåˆ†ã®åå‰ã‚’æ›¸ã‘ã¾ã™ã‹ï¼Ÿ  
â¤ï¸ Â¿QuÃ© te gusta de la escuela?  
å­¦æ ¡ã®ã©ã‚“ãªã¨ã“ã‚ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ‘¦ Â¿QuiÃ©n es tu primer amigo?  
æœ€åˆã®å‹é”ã¯èª°ã§ã™ã‹ï¼Ÿ  
ğŸ« Â¿QuÃ© haces en la escuela?  
å­¦æ ¡ã§ä½•ã‚’ã—ã¾ã™ã‹ï¼Ÿ`,
                story10: `#STORY
ğŸ„ Es Navidad.  
ã‚¯ãƒªã‚¹ãƒã‚¹ã§ã™ã€‚  
ğŸ Hay regalos bajo el Ã¡rbol.  
æœ¨ã®ä¸‹ã«ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆãŒã‚ã‚Šã¾ã™ã€‚  
ğŸ‘§ MarÃ­a abre su regalo.  
ãƒãƒªã‚¢ã¯ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚’é–‹ã‘ã¾ã™ã€‚  
ğŸ¦– Â¡Es un dinosaurio de peluche!  
ã¬ã„ãã‚‹ã¿ã®æç«œã§ã™ï¼  
â¤ï¸ MarÃ­a lo abraza.  
ãƒãƒªã‚¢ã¯ãã‚Œã‚’æŠ±ãã—ã‚ã¾ã™ã€‚  
ğŸ‘¦ Kaito recibe un balÃ³n.  
ã‚«ã‚¤ãƒˆã¯ãƒœãƒ¼ãƒ«ã‚’ã‚‚ã‚‰ã„ã¾ã™ã€‚  
âš½ Sorato recibe unos guantes.  
ã‚½ãƒ©ãƒˆã¯ã‚°ãƒ­ãƒ¼ãƒ–ã‚’ã‚‚ã‚‰ã„ã¾ã™ã€‚  
ğŸ¶ Cantan villancicos.  
ã‚¯ãƒªã‚¹ãƒã‚¹ã‚­ãƒ£ãƒ­ãƒ«ã‚’æ­Œã„ã¾ã™ã€‚  
ğŸª Comen galletas.  
ã‚¯ãƒƒã‚­ãƒ¼ã‚’é£Ÿã¹ã¾ã™ã€‚  
ğŸ˜Š Todos estÃ¡n felices.  
ã¿ã‚“ãªå¹¸ã›ã§ã™ã€‚  

#QUESTIONS
ğŸ„ Â¿Te gusta la Navidad?  
ã‚¯ãƒªã‚¹ãƒã‚¹ã¯å¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ Â¿QuÃ© regalo quieres?  
ã©ã‚“ãªãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆãŒæ¬²ã—ã„ã§ã™ã‹ï¼Ÿ  
ğŸ¦– Â¿Te gustan los dinosaurios?  
æç«œã¯å¥½ãã§ã™ã‹ï¼Ÿ  
â¤ï¸ Â¿Abrazas tus regalos?  
ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã‚’æŠ±ãã—ã‚ã¾ã™ã‹ï¼Ÿ  
ğŸ¶ Â¿Cantas en Navidad?  
ã‚¯ãƒªã‚¹ãƒã‚¹ã«æ­Œã‚’æ­Œã„ã¾ã™ã‹ï¼Ÿ  
ğŸª Â¿QuÃ© comida te gusta en Navidad?  
ã‚¯ãƒªã‚¹ãƒã‚¹ã«ã©ã‚“ãªé£Ÿã¹ç‰©ãŒå¥½ãã§ã™ã‹ï¼Ÿ  
ğŸ˜Š Â¿EstÃ¡s feliz en Navidad?  
ã‚¯ãƒªã‚¹ãƒã‚¹ã«å¹¸ã›ã§ã™ã‹ï¼Ÿ  
ğŸ‘« Â¿Con quiÃ©n celebras?  
èª°ã¨ç¥ã„ã¾ã™ã‹ï¼Ÿ  
ğŸ„ Â¿QuÃ© ves en Navidad?  
ã‚¯ãƒªã‚¹ãƒã‚¹ã«ä½•ã‚’è¦‹ã¾ã™ã‹ï¼Ÿ  
â¤ï¸ Â¿QuÃ© es lo mejor de Navidad?  
ã‚¯ãƒªã‚¹ãƒã‚¹ã®ä¸€ç•ªè‰¯ã„ã¨ã“ã‚ã¯ä½•ã§ã™ã‹ï¼Ÿ`
            }
        };

        // Global variables
        let currentContentType = null;
        let currentStory = null;
        let sentences = [];
        let currentSentenceIndex = 0;
        let fruitGameEnabled = false;
        let fruitGameActive = false;
        let shouldAdvanceAfterGame = false;
        let isNightMode = false;

        // DOM elements
        const mainContainer = document.getElementById('mainContainer');
        const readingModeContainer = document.getElementById('readingModeContainer');
        const spanishSentence = document.getElementById('spanishSentence');
        const japaneseSentence = document.getElementById('japaneseSentence');
        const prevSentenceBtn = document.getElementById('prevSentence');
        const nextSentenceBtn = document.getElementById('nextSentence');
        const playSpanishBtn = document.getElementById('playSpanish');
        const playJapaneseBtn = document.getElementById('playJapanese');
        const exitReadingBtn = document.getElementById('exitReading');
        const fruitToggleBtn = document.getElementById('fruitToggle');
        const contentSelector = document.getElementById('contentSelector');
        const storySelector = document.getElementById('storySelector');
        const nightModeToggle = document.getElementById('nightModeToggle');
        
        // Initialize the app
        function init() {
            // Set up event listeners
            contentSelector.addEventListener('change', handleContentSelect);
            storySelector.addEventListener('change', handleStorySelect);

            nightModeToggle.addEventListener('click', toggleNightMode);
            prevSentenceBtn.addEventListener('click', showPreviousSentence);
            nextSentenceBtn.addEventListener('click', showNextSentence);
            playSpanishBtn.addEventListener('click', () => playSentence('spanish'));
            playJapaneseBtn.addEventListener('click', () => playSentence('japanese'));
            exitReadingBtn.addEventListener('click', exitReadingMode);
            fruitToggleBtn.addEventListener('click', toggleFruitGame);

            // Initialize translation elements
            initTranslationElements();
            
            // Set up keyboard navigation for TV remote
            document.addEventListener('keydown', handleRemoteInput);
            
            // Load voices when they become available
            if ('speechSynthesis' in window) {
                window.speechSynthesis.onvoiceschanged = function() {
                    console.log('Voices loaded');
                };
                
                // Some browsers need this to load voices
                if (window.speechSynthesis.getVoices().length === 0) {
                    window.speechSynthesis.getVoices();
                }
            }
            
            // Focus the content selector
            contentSelector.focus();
        }
        
        function updatePageCounter() {
            if (!sentences || sentences.length === 0) return;
            
            document.getElementById('currentPage').textContent = currentSentenceIndex + 1;
            document.getElementById('totalPages').textContent = sentences.length;
        }

        function toggleNightMode() {
            isNightMode = !isNightMode;
            document.body.classList.toggle('dark-mode', isNightMode);
            nightModeToggle.textContent = isNightMode ? 'â˜€ï¸' : 'ğŸŒ™';
            
            // Save preference to localStorage
            localStorage.setItem('nightMode', isNightMode);
        }
        
        function handleContentSelect() {
            currentContentType = this.value;
            storySelector.disabled = (currentContentType !== 'stories');
            
            if (currentContentType === 'stories') {
                populateStorySelector();
            } else if (currentContentType === 'questions') {
                // Enter reading mode for questions
                enterReadingMode();
            } else {
                storySelector.innerHTML = '<option value="">ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’é¸æŠ</option>';
                storySelector.disabled = true;
            }
        }
        
        function handleStorySelect() {
            currentStory = this.value;
            
            if (currentStory) {
                enterReadingMode();
            }
        }
        
        function populateStorySelector() {
            storySelector.innerHTML = '<option value="">ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ã‚’é¸æŠ</option>';
            for (let i = 1; i <= 10; i++) {
                const option = document.createElement('option');
                option.value = `story${i}`;
                option.textContent = `ã‚¹ãƒˆãƒ¼ãƒªãƒ¼ ${i}`;
                storySelector.appendChild(option);
            }
            storySelector.disabled = false;
            storySelector.focus();
        }
        
        // Enter reading mode
        function enterReadingMode() {
            // Hide main container and show reading container
            mainContainer.style.display = 'none';
            readingModeContainer.style.display = 'flex';
            
            // Initialize translation events
            initTranslationEvents();
            
            // Load the content
            loadTextContent();
        }
        
        // Exit reading mode
        function exitReadingMode() {
            // Show main container and hide reading container
            mainContainer.style.display = 'block';
            readingModeContainer.style.display = 'none';
            
            // Stop any speech
            stopSpeech();
            
            // Focus the content selector
            setTimeout(() => {
                contentSelector.focus();
            }, 100);
        }
        
        // Load text content for reading mode
        function loadTextContent() {
            let content;
            if (currentContentType === 'questions') {
                content = spanishContent.questions;
            } else if (currentContentType === 'stories' && currentStory) {
                content = spanishContent.stories[currentStory];
            } else {
                alert('ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãŒåˆ©ç”¨ã§ãã¾ã›ã‚“');
                exitReadingMode();
                return;
            }

            sentences = parseStoryFile(content);
            if (sentences.length > 0) {
                currentSentenceIndex = 0;
                updatePageCounter();
                displayCurrentSentence();
            } else {
                alert('æ–‡ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                exitReadingMode();
            }
        }
        
        // Parse story file content
function parseStoryFile(text) {
    const lines = text.split('\n')
        .map(line => line.trim())
        .filter(line => line.length > 0 && !line.startsWith('#'));
    
    const result = [];
    let spanishLine = null;
    
    for (const line of lines) {
        // Spanish line has emojis or Spanish characters
        if (/[a-zA-ZÃ¡Ã©Ã­Ã³ÃºÃÃ‰ÃÃ“ÃšÃ±Ã‘Â¿Â¡]/.test(line)) {
            spanishLine = line;
        } 
        // Japanese line (any line that's not Spanish and not empty)
        else if (spanishLine) {
            result.push({
                spanish: spanishLine,
                japanese: line,
                number: result.length + 1
            });
            spanishLine = null;
        }
    }
    
    return result;
}
        
        function ensureTextVisibility() {
            const rows = document.querySelectorAll('.sentence-row');
            rows.forEach(row => {
                const display = row.querySelector('.sentence-display');
                if (display.scrollHeight > display.clientHeight) {
                    // Reduce font size until text fits
                    let fontSize = parseFloat(window.getComputedStyle(display).fontSize);
                    while (display.scrollHeight > display.clientHeight && fontSize > 24) {
                        fontSize -= 1;
                        display.style.fontSize = `${fontSize}px`;
                    }
                }
            });
        }
        
        // Display current sentence
        function displayCurrentSentence() {
            if (!sentences || sentences.length === 0) {
                spanishSentence.textContent = "æ–‡ãŒèª­ã¿è¾¼ã¾ã‚Œã¦ã„ã¾ã›ã‚“";
                japaneseSentence.textContent = "";
                return;
            }

            const sentence = sentences[currentSentenceIndex];
            
            // Remove emoji from display if it's at the start of the sentence
            let spanishText = sentence.spanish;
            const emojiRegex = /^(\p{Emoji_Presentation}|\p{Extended_Pictographic})/u;
            if (emojiRegex.test(spanishText)) {
                // Find the first emoji character
                const emojiMatch = spanishText.match(emojiRegex);
                if (emojiMatch && emojiMatch[0]) {
                    spanishText = spanishText.substring(emojiMatch[0].length).trim();
                }
            }
            
            spanishSentence.textContent = `${sentence.number}. ${spanishText}`;
            japaneseSentence.textContent = `${sentence.number}. ${sentence.japanese}`;
            
            // Update button states - Never disable navigation buttons
            prevSentenceBtn.disabled = false;
            nextSentenceBtn.disabled = false;
            setTimeout(ensureTextVisibility, 50);
            updatePageCounter(); 
        }
        
        // Play sentence audio
        function playSentence(type) {
            if (sentences.length === 0 || fruitGameActive) return;
            
            const sentence = sentences[currentSentenceIndex];
            let text = type === 'spanish' ? sentence.spanish : sentence.japanese;
            const lang = type === 'spanish' ? 'es-ES' : 'ja-JP';
            
            // Remove emoji from text to be spoken
            const emojiRegex = /(\p{Emoji_Presentation}|\p{Extended_Pictographic})/gu;
            text = text.replace(emojiRegex, '').trim();
            
            // Stop any current speech and sounds
            stopSpeech();
            
            // Speak the sentence
            speakSentence(text, lang);
        }
        
        function stopSpeech() {
            if ('speechSynthesis' in window) {
                window.speechSynthesis.cancel();
            }
        }    
        
        // Text-to-speech function
        function speakSentence(text, lang) {
            if (!('speechSynthesis' in window)) {
                console.warn('éŸ³å£°åˆæˆãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“');
                return;
            }

            // Stop any current speech
            stopSpeech();

            // Create new utterance
            const utterance = new SpeechSynthesisUtterance(text);
            
            // Set language and voice properties
            utterance.lang = lang;
            utterance.rate = 0.9;
            utterance.pitch = 1;
            utterance.volume = 1;

            // Function to actually speak once voices are loaded
            const speakWithVoice = () => {
                const voices = window.speechSynthesis.getVoices();
                
                // Find the appropriate voice
                let voice;
                if (lang === 'es-ES') {
                    // Find a Spanish voice
                    voice = voices.find(v => 
                        v.lang === 'es-ES' || 
                        v.lang.startsWith('es')
                    );
                } else if (lang === 'ja-JP') {
                    // Find a Japanese voice
                    voice = voices.find(v => 
                        v.lang === 'ja-JP' || 
                        v.lang.startsWith('ja')
                    );
                }

                if (voice) {
                    utterance.voice = voice;
                    console.log('Using voice:', voice.name, 'for language:', lang);
                } else {
                    console.warn('No specific voice found for', lang, 'using default');
                }

                // Error handling
                utterance.onerror = function(event) {
                    console.error('SpeechSynthesis error:', event);
                };

                // Speak immediately
                window.speechSynthesis.speak(utterance);
            };

            // Check if voices are loaded
            const voices = window.speechSynthesis.getVoices();
            if (voices.length === 0) {
                console.log('Waiting for voices to load...');
                window.speechSynthesis.onvoiceschanged = speakWithVoice;
            } else {
                speakWithVoice();
            }
        }
        
        // Navigation functions
        function showNextSentence() {
            stopSpeech();
            closeTranslationPopupHandler();
            
            if (sentences.length === 0 || fruitGameActive) return;
            
            const isLastPage = currentSentenceIndex >= sentences.length - 1;
            
            // Always allow fruit game if enabled
            if (fruitGameEnabled) {
                shouldAdvanceAfterGame = true; // Always set to true - we'll handle last page in hideFruitGame
                showFruitGame();
                return;
            }
            
            // Handle last page case (only when fruit game is off)
            if (isLastPage) {
                currentSentenceIndex = 0; // Loop to beginning
                displayCurrentSentence();
                return;
            }
            
            // Normal case - go to next sentence
            advanceToNextSentence();
        }
        
        function advanceToNextSentence() {
            if (currentSentenceIndex < sentences.length - 1) {
                currentSentenceIndex++;
            } else {
                currentSentenceIndex = 0; // Loop to beginning
            }
            
            displayCurrentSentence();
            updatePageCounter();
        }
        
        function showPreviousSentence() {
            stopSpeech();
            closeTranslationPopupHandler(); // Close any open translation popup
            
            if (sentences.length === 0) return;
            
            if (currentSentenceIndex > 0) {
                currentSentenceIndex--;
            } else {
                currentSentenceIndex = sentences.length - 1; // Loop to end
            }
            
            displayCurrentSentence();
            updatePageCounter(); 
        }
        
        // Handle TV remote input
        function handleRemoteInput(e) {
            const activeElement = document.activeElement;
            
            switch(e.key) {
                case 'ArrowUp':
                    navigateFocus('up');
                    e.preventDefault();
                    break;
                case 'ArrowDown':
                    navigateFocus('down');
                    e.preventDefault();
                    break;
                case 'ArrowLeft':
                    if (activeElement === prevSentenceBtn) {
                        showPreviousSentence();
                    } else {
                        navigateFocus('left');
                    }
                    e.preventDefault();
                    break;
                case 'ArrowRight':
                    if (activeElement === nextSentenceBtn) {
                        showNextSentence();
                    } else {
                        navigateFocus('right');
                    }
                    e.preventDefault();
                    break;
                case 'Enter':
                    if (activeElement) {
                        activeElement.click();
                    }
                    break;
                case 'Backspace':
                    exitReadingMode();
                    break;
            }
        }
        
        // Navigate focus between elements
        function navigateFocus(direction) {
            const focusable = Array.from(document.querySelectorAll('button, select, [tabindex="0"]'));
            const currentIndex = focusable.indexOf(document.activeElement);
            
            if (currentIndex === -1) {
                if (focusable.length > 0) focusable[0].focus();
                return;
            }
            
            let nextIndex = currentIndex;
            
            // Simple navigation - can be enhanced for grid layouts
            if (direction === 'up' || direction === 'left') {
                nextIndex = Math.max(0, currentIndex - 1);
            } else {
                nextIndex = Math.min(focusable.length - 1, currentIndex + 1);
            }
            
            focusable[nextIndex].focus();
        }
        
        // Translation state variables
        let translationPopup, translationOverlay, closeTranslationPopup;
        let translationOriginal, translationResult, translationTts;
        let selectedText = '';
        let translationLang = '';

        // Initialize translation elements
        function initTranslationElements() {
            translationPopup = document.getElementById('translationPopup');
            translationOverlay = document.getElementById('translationOverlay');
            closeTranslationPopup = document.getElementById('closeTranslationPopup');
            translationOriginal = document.getElementById('translationOriginal');
            translationResult = document.getElementById('translationResult');
            translationTts = document.getElementById('translationTts');
            
            if (!translationPopup || !translationOverlay || !closeTranslationPopup || 
                !translationOriginal || !translationResult || !translationTts) {
                console.error('ç¿»è¨³è¦ç´ ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“');
                return false;
            }
            
            // Reset state
            selectedText = '';
            translationLang = '';
            return true;
        }

        // Show translation popup
        function showTranslationPopup(text, lang) {
            // Validate input
            const trimmedText = text.trim();
            if (!trimmedText || trimmedText.length < 1 || trimmedText.toLowerCase() === 'translate') {
                return;
            }
            
            // Reset previous state
            closeTranslationPopupHandler();
            
            // Set new translation data
            selectedText = trimmedText;
            translationLang = lang;
            
            // Update UI labels based on translation direction
            const sourceLabel = document.getElementById('sourceLanguageLabel');
            const targetLabel = document.getElementById('targetLanguageLabel');
            
            if (lang === 'es') {
                sourceLabel.textContent = 'ã‚¹ãƒšã‚¤ãƒ³èª:';
                targetLabel.textContent = 'æ—¥æœ¬èª:';
            } else {
                sourceLabel.textContent = 'æ—¥æœ¬èª:';
                targetLabel.textContent = 'ã‚¹ãƒšã‚¤ãƒ³èª:';
            }
            
            // Highlight the selected text
            try {
                const selection = window.getSelection();
                if (selection.rangeCount > 0) {
                    const range = selection.getRangeAt(0);
                    const span = document.createElement('span');
                    span.className = 'highlighted-text';
                    span.style.backgroundColor = 'rgba(255, 255, 0, 0.3)';
                    range.surroundContents(span);
                }
            } catch (e) {
                console.error('ãƒ†ã‚­ã‚¹ãƒˆã®ãƒã‚¤ãƒ©ã‚¤ãƒˆä¸­ã«ã‚¨ãƒ©ãƒ¼:', e);
            }
            
            // Update UI with original text
            translationOriginal.textContent = selectedText;
            translationResult.textContent = "ç¿»è¨³ã‚’èª­ã¿è¾¼ã¿ä¸­...";
            
            // Show popup
            translationPopup.classList.add('active');
            translationOverlay.classList.add('active');
            
            // Fetch translation
            fetchTranslation(selectedText, lang);
            
            // Add event listener to close popup when clicking Next button
            const nextBtn = document.getElementById('nextSentence');
            const prevBtn = document.getElementById('prevSentence');
            
            const closeOnNav = () => {
                closeTranslationPopupHandler();
                nextBtn.removeEventListener('click', closeOnNav);
                prevBtn.removeEventListener('click', closeOnNav);
            };
            
            nextBtn.addEventListener('click', closeOnNav);
            prevBtn.addEventListener('click', closeOnNav);
        }

        function closeTranslationPopupHandler() {
            if (!translationPopup || !translationOverlay) return;
            
            translationPopup.classList.remove('active');
            translationOverlay.classList.remove('active');
            stopSpeech();
            
            // Clear the translation fields
            translationOriginal.textContent = '';
            translationResult.textContent = '';
            
            // Reset selection state
            if (window.getSelection) {
                window.getSelection().removeAllRanges();
            }
            
            // Remove all highlights and restore original text
            document.querySelectorAll('.highlighted-text').forEach(el => {
                const parent = el.parentNode;
                while (el.firstChild) {
                    parent.insertBefore(el.firstChild, el);
                }
                parent.removeChild(el);
                parent.normalize(); // Combine adjacent text nodes
            });
            
            // Reset translation variables
            selectedText = '';
            translationLang = '';
        }

        // Fetch translation from a free API
        function fetchTranslation(text, lang) {
            // Correct format is "es|ja" or "ja|es"
            const langPair = lang === 'es' ? 'es|ja' : 'ja|es';
            
            // Encode the text and language pair properly
            const encodedText = encodeURIComponent(text);
            const encodedLangPair = encodeURIComponent(langPair);
            
            // Build the API URL
            const apiUrl = `https://api.mymemory.translated.net/get?q=${encodedText}&langpair=${encodedLangPair}`;
            
            // Use a reliable CORS proxy
            const proxyUrl = 'https://corsproxy.io/?';
            
            fetch(proxyUrl + apiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error('ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å¿œç­”ãŒæ­£å¸¸ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸ');
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.responseData && data.responseData.translatedText) {
                        // Clean the translated text
                        let translatedText = data.responseData.translatedText;
                        
                        // Remove unwanted characters and formatting
                        translatedText = translatedText
                            .replace(/[#*_~`^]/g, '') // Remove special formatting chars
                            .replace(/\{.*?\}/g, '')   // Remove {tags}
                            .replace(/\[.*?\]/g, '')   // Remove [tags]
                            .replace(/\(.*?\)/g, '')   // Remove (tags)
                            .replace(/\d+/g, '')       // Remove numbers
                            .trim();
                        
                        // If the result is empty after cleaning, show an error
                        if (!translatedText) {
                            throw new Error('ç¿»è¨³ãŒç©ºã§ã—ãŸ');
                        }
                        
                        translationResult.textContent = translatedText;
                    } else {
                        throw new Error('ç¿»è¨³ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸ');
                    }
                })
                .catch(error => {
                    console.error('ç¿»è¨³ã‚¨ãƒ©ãƒ¼:', error);
                    translationResult.textContent = "ç¿»è¨³ã‚’å–å¾—ã§ãã¾ã›ã‚“ã§ã—ãŸ";
                });
        }
        
        // Handle text selection - CORRECTED VERSION
        function handleTextSelection() {
            try {
                const selection = window.getSelection();
                if (!selection || selection.isCollapsed || selection.rangeCount === 0) {
                    return;
                }

                const selectedText = selection.toString().trim();
                if (!selectedText || selectedText.length < 1 || selectedText.toLowerCase() === 'translate') {
                    return;
                }

                const range = selection.getRangeAt(0);
                const container = range.commonAncestorContainer;

                // Check if selection is within our target elements
                const isSpanish = spanishSentence.contains(container);
                const isJapanese = japaneseSentence.contains(container);
                if (!isSpanish && !isJapanese) {
                    closeTranslationPopupHandler();
                    return;
                }

                // Skip if selection is collapsed (no actual text)
                if (range.collapsed) {
                    closeTranslationPopupHandler();
                    return;
                }

                // Show translation immediately for the selected text
                showTranslationPopup(selectedText, isSpanish ? 'es' : 'ja');
            } catch (error) {
                console.error('ãƒ†ã‚­ã‚¹ãƒˆé¸æŠå‡¦ç†ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:', error);
            }
        }
        
        function initTranslationEvents() {
            // Initialize translation elements first
            if (!initTranslationElements()) return;

            // Click event for single words
            spanishSentence.addEventListener('click', handleSpanishClick);
            japaneseSentence.addEventListener('click', handleJapaneseClick);
            
            // Selection event for phrases
            document.addEventListener('mouseup', handleTextSelection);
            
            // Close popup events
            closeTranslationPopup.addEventListener('click', closeTranslationPopupHandler);
            translationOverlay.addEventListener('click', closeTranslationPopupHandler);
            
            // TTS button
            translationTts.addEventListener('click', () => {
                if (selectedText && translationLang) {
                    speakSentence(selectedText, translationLang === 'es' ? 'es-ES' : 'ja-JP');
                }
            });
        }

        function handleSpanishClick(e) {
            if (e.target === spanishSentence) {
                const word = getWordAtPoint(spanishSentence, e.clientX, e.clientY);
                if (word) {
                    showTranslationPopup(word, 'es');
                }
            }
        }

        function handleJapaneseClick(e) {
            if (e.target === japaneseSentence) {
                const word = getWordAtPoint(japaneseSentence, e.clientX, e.clientY);
                if (word) {
                    showTranslationPopup(word, 'ja');
                }
            }
        }

        // Helper function to get word at specific coordinates
        function getWordAtPoint(element, x, y) {
            const range = document.caretRangeFromPoint(x, y);
            if (!range) return null;
            
            range.expand('word');
            const word = range.toString().trim();
            return word || null;
        }
        
        // Fruit game categories - ALL IN SPANISH
        const categories = [
            { 
                name: 'Frutas', 
                items: [
                    {emoji: 'ğŸ', name: 'Manzana'}, 
                    {emoji: 'ğŸŠ', name: 'Naranja'},
                    {emoji: 'ğŸ‡', name: 'Uvas'},
                    {emoji: 'ğŸ‹', name: 'LimÃ³n'},
                    {emoji: 'ğŸ‰', name: 'SandÃ­a'},
                    {emoji: 'ğŸ“', name: 'Fresa'},
                    {emoji: 'ğŸ’', name: 'Cereza'},
                    {emoji: 'ğŸ‘', name: 'MelocotÃ³n'},
                    {emoji: 'ğŸ', name: 'PiÃ±a'},
                    {emoji: 'ğŸ¥', name: 'Kiwi'}
                ]
            },
            { 
                name: 'Verduras', 
                items: [
                    {emoji: 'ğŸ¥•', name: 'Zanahoria'},
                    {emoji: 'ğŸ¥¦', name: 'BrÃ³coli'},
                    {emoji: 'ğŸ…', name: 'Tomate'},
                    {emoji: 'ğŸ¥’', name: 'Pepino'},
                    {emoji: 'ğŸŒ½', name: 'MaÃ­z'},
                    {emoji: 'ğŸ†', name: 'Berenjena'},
                    {emoji: 'ğŸ¥¬', name: 'Lechuga'},
                    {emoji: 'ğŸ§…', name: 'Cebolla'},
                    {emoji: 'ğŸ§„', name: 'Ajo'},
                    {emoji: 'ğŸ¥”', name: 'Papa'}
                ]
            },
            { 
                name: 'Naturaleza', 
                items: [
                    {emoji: 'ğŸŒ²', name: 'Ãrbol'},
                    {emoji: 'ğŸŒµ', name: 'Cactus'},
                    {emoji: 'ğŸŒŠ', name: 'Ola'},
                    {emoji: 'â›°ï¸', name: 'MontaÃ±a'},
                    {emoji: 'ğŸŒ‹', name: 'VolcÃ¡n'},
                    {emoji: 'ğŸï¸', name: 'Isla'},
                    {emoji: 'ğŸŒ…', name: 'Amanecer'},
                    {emoji: 'ğŸŒˆ', name: 'ArcoÃ­ris'},
                    {emoji: 'â„ï¸', name: 'Copo de nieve'},
                    {emoji: 'ğŸŒªï¸', name: 'Tornado'}
                ]
            },
            { 
                name: 'Animales', 
                items: [
                    {emoji: 'ğŸ¶', name: 'Perro'},
                    {emoji: 'ğŸ±', name: 'Gato'},
                    {emoji: 'ğŸ¦', name: 'LeÃ³n'},
                    {emoji: 'ğŸ¯', name: 'Tigre'},
                    {emoji: 'ğŸ¦Š', name: 'Zorro'},
                    {emoji: 'ğŸ»', name: 'Oso'},
                    {emoji: 'ğŸ¼', name: 'Panda'},
                    {emoji: 'ğŸ¨', name: 'Koala'},
                    {emoji: 'ğŸµ', name: 'Mono'},
                    {emoji: 'ğŸ¦„', name: 'Unicornio'}
                ]
            },
            { 
                name: 'Comida', 
                items: [
                    {emoji: 'ğŸ•', name: 'Pizza'},
                    {emoji: 'ğŸ”', name: 'Hamburguesa'},
                    {emoji: 'ğŸŒ­', name: 'Perrito caliente'},
                    {emoji: 'ğŸŸ', name: 'Papas fritas'},
                    {emoji: 'ğŸ£', name: 'Sushi'},
                    {emoji: 'ğŸ©', name: 'Dona'},
                    {emoji: 'ğŸª', name: 'Galleta'},
                    {emoji: 'ğŸ¿', name: 'Palomitas'},
                    {emoji: 'ğŸ¦', name: 'Helado'},
                    {emoji: 'ğŸ«', name: 'Chocolate'}
                ]
            },
            { 
                name: 'Deportes', 
                items: [
                    {emoji: 'âš½', name: 'FÃºtbol'},
                    {emoji: 'ğŸ€', name: 'Baloncesto'},
                    {emoji: 'ğŸˆ', name: 'FÃºtbol americano'},
                    {emoji: 'âš¾', name: 'BÃ©isbol'},
                    {emoji: 'ğŸ¾', name: 'Tenis'},
                    {emoji: 'ğŸ', name: 'Voleibol'},
                    {emoji: 'ğŸ±', name: 'Billar'},
                    {emoji: 'ğŸ“', name: 'Ping Pong'},
                    {emoji: 'ğŸ¸', name: 'BÃ¡dminton'},
                    {emoji: 'ğŸ¥Š', name: 'Boxeo'}
                ]
            },
            { 
                name: 'VehÃ­culos', 
                items: [
                    {emoji: 'ğŸš—', name: 'Coche'},
                    {emoji: 'ğŸš•', name: 'Taxi'},
                    {emoji: 'ğŸš™', name: 'Camioneta'},
                    {emoji: 'ğŸšŒ', name: 'AutobÃºs'},
                    {emoji: 'ğŸš‘', name: 'Ambulancia'},
                    {emoji: 'ğŸš’', name: 'CamiÃ³n de bomberos'},
                    {emoji: 'ğŸšœ', name: 'Tractor'},
                    {emoji: 'ğŸš²', name: 'Bicicleta'},
                    {emoji: 'ğŸ›µ', name: 'Scooter'},
                    {emoji: 'âœˆï¸', name: 'AviÃ³n'}
                ]
            },
            { 
                name: 'Hogar', 
                items: [
                    {emoji: 'ğŸ›ï¸', name: 'Cama'},
                    {emoji: 'ğŸ›‹ï¸', name: 'SofÃ¡'},
                    {emoji: 'ğŸšª', name: 'Puerta'},
                    {emoji: 'ğŸª‘', name: 'Silla'},
                    {emoji: 'ğŸ›', name: 'BaÃ±era'},
                    {emoji: 'ğŸš¿', name: 'Ducha'},
                    {emoji: 'ğŸ§»', name: 'Papel higiÃ©nico'},
                    {emoji: 'ğŸ§¹', name: 'Escoba'},
                    {emoji: 'ğŸ§´', name: 'LociÃ³n'},
                    {emoji: 'ğŸ”ª', name: 'Cuchillo de cocina'}
                ]
            },
            { 
                name: 'Ropa', 
                items: [
                    {emoji: 'ğŸ‘•', name: 'Camiseta'},
                    {emoji: 'ğŸ‘–', name: 'Vaqueros'},
                    {emoji: 'ğŸ§¥', name: 'Abrigo'},
                    {emoji: 'ğŸ‘—', name: 'Vestido'},
                    {emoji: 'ğŸ‘”', name: 'Corbata'},
                    {emoji: 'ğŸ‘š', name: 'Blusa'},
                    {emoji: 'ğŸ‘Ÿ', name: 'Zapatillas'},
                    {emoji: 'ğŸ§¦', name: 'Calcetines'},
                    {emoji: 'ğŸ§¤', name: 'Guantes'},
                    {emoji: 'ğŸ©', name: 'Sombrero de copa'}
                ]
            },
            { 
                name: 'ElectrÃ³nicos', 
                items: [
                    {emoji: 'ğŸ“±', name: 'TelÃ©fono mÃ³vil'},
                    {emoji: 'ğŸ’»', name: 'Ordenador portÃ¡til'},
                    {emoji: 'ğŸ–¥ï¸', name: 'Ordenador de sobremesa'},
                    {emoji: 'ğŸ–¨ï¸', name: 'Impresora'},
                    {emoji: 'ğŸ“·', name: 'CÃ¡mara'},
                    {emoji: 'ğŸ¥', name: 'VideocÃ¡mara'},
                    {emoji: 'ğŸ“º', name: 'Televisor'},
                    {emoji: 'ğŸ®', name: 'Mando de juego'},
                    {emoji: 'âŒš', name: 'Reloj'},
                    {emoji: 'ğŸ”Œ', name: 'Enchufe'}
                ]
            }
        ];

        // Fruit game functions
        function updateFruitButtonState() {
            fruitToggleBtn.textContent = fruitGameEnabled ? 'ğŸ° ãƒ•ãƒ«ãƒ¼ãƒ„ã‚²ãƒ¼ãƒ  ON' : 'ğŸ° ãƒ•ãƒ«ãƒ¼ãƒ„ã‚²ãƒ¼ãƒ  OFF';
            fruitToggleBtn.classList.toggle('on', fruitGameEnabled);
        }
        
        function toggleFruitGame() {
            fruitGameEnabled = !fruitGameEnabled;
            updateFruitButtonState();
            
            if (fruitGameEnabled) {
                playSound('activate');
                if (navigator.vibrate) navigator.vibrate(50);
            }
            
            console.log('ãƒ•ãƒ«ãƒ¼ãƒ„ã‚²ãƒ¼ãƒ :', fruitGameEnabled ? 'ON' : 'OFF');
        }
        
        function showFruitGame() {
            if (!fruitGameEnabled || fruitGameActive) {
                console.log('ãƒ•ãƒ«ãƒ¼ãƒ„ã‚²ãƒ¼ãƒ ãŒè¡¨ç¤ºã•ã‚Œã¾ã›ã‚“ - æœ‰åŠ¹:', fruitGameEnabled, 'ã‚¢ã‚¯ãƒ†ã‚£ãƒ–:', fruitGameActive);
                return;
            }
            
            // Stop any current speech
            stopSpeech();
            fruitGameActive = true;
            
            // Create game container
            const gameContainer = document.createElement('div');
            gameContainer.className = 'fruit-game-container';
            gameContainer.innerHTML = `
                <div class="fruit-game">
                    <h2 class="japanese-font">ãƒ•ãƒ«ãƒ¼ãƒ„ãƒã‚·ãƒ³ï¼</h2>
                    <div class="fruit-reels">
                        <div class="reel-container">
                            <div class="fruit-reel" id="reel1">ğŸ</div>
                            <div class="fruit-name" id="name1"></div>
                        </div>
                        <div class="reel-container">
                            <div class="fruit-reel" id="reel2">ğŸŠ</div>
                            <div class="fruit-name" id="name2"></div>
                        </div>
                        <div class="reel-container">
                            <div class="fruit-reel" id="reel3">ğŸ‡</div>
                            <div class="fruit-name" id="name3"></div>
                        </div>
                    </div>
                    <div id="fruitResult" class="japanese-font" style="font-size: 2rem; min-height: 60px; margin: 20px 0;"></div>
                    <button id="exitFruitGame" class="btn japanese-font" style="margin-top: 20px; background-color: var(--warning);">çµ‚äº†</button>
                </div>
            `;
            
            document.body.appendChild(gameContainer);
            
            // Spin the reels
            spinReels();
            
            // Exit button
            document.getElementById('exitFruitGame').addEventListener('click', hideFruitGame);
        }
        
        function hideFruitGame() {
            const game = document.querySelector('.fruit-game-container');
            if (game) game.remove();
            fruitGameActive = false;
            
            // Stop any game sounds
            if (window.AudioContext) {
                const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
                audioCtx.close();
            }
            
            // Ensure translation popup is closed
            closeTranslationPopupHandler();
            
            setTimeout(() => {
                if (shouldAdvanceAfterGame) {
                    const isLastPage = currentSentenceIndex >= sentences.length - 1;
                    if (isLastPage) {
                        // If we're on last page, loop back to first page
                        currentSentenceIndex = 0;
                    } else {
                        // Otherwise just go to next page
                        advanceToNextSentence();
                    }
                    shouldAdvanceAfterGame = false;
                }
                displayCurrentSentence(); // Always refresh display
            }, 500);
        }
        
        function spinReels() {
            // Select a random category for this spin
            const currentCategory = categories[Math.floor(Math.random() * categories.length)];
            const items = currentCategory.items;
            
            const reels = [
                document.getElementById('reel1'),
                document.getElementById('reel2'),
                document.getElementById('reel3')
            ];
            const resultDisplay = document.getElementById('fruitResult');
            
            // Reset display
            resultDisplay.textContent = '';
            resultDisplay.style.color = '';
            
            // Play spinning sound
            playSound('spin');
            
            // Determine if we should have a match (1 in 3 chance)
            const shouldMatch = Math.random() < 0.33;
            let matchingItem = '';
            
            if (shouldMatch) {
                matchingItem = items[Math.floor(Math.random() * items.length)];
                // Update the matchingItem to be the full object (not just emoji)
                matchingItem = items.find(item => item.emoji === matchingItem.emoji) || matchingItem;
            }
            
            // Spin each reel with delays between them
            spinReel(reels[0], 0, items, matchingItem, shouldMatch, () => {
                playSound('reelStop');
                spinReel(reels[1], 300, items, matchingItem, shouldMatch, () => {
                    playSound('reelStop');
                    spinReel(reels[2], 300, items, matchingItem, shouldMatch, () => {
                        playSound('reelStop');
                        
                        // Check for win after last reel stops
                        setTimeout(() => {
                            if (shouldMatch && reels[0].textContent === reels[1].textContent && 
                                reels[1].textContent === reels[2].textContent) {
                                // Win condition
                                playSound('win');
                                playSound('coin');
                                resultDisplay.textContent = 'ğŸ‰ å½“ãŸã‚Šï¼ ğŸ‰';
                                resultDisplay.style.color = 'var(--success)';
                                resultDisplay.style.fontWeight = 'bold';
                                
                                // Celebration animation
                                reels.forEach(reel => {
                                    reel.style.transform = 'scale(1.2)';
                                    reel.style.transition = 'all 0.3s';
                                    reel.style.boxShadow = '0 0 20px gold';
                                });
                                
                                // Confetti effect
                                setTimeout(() => {
                                    createConfetti();
                                }, 500);
                                
                                setTimeout(hideFruitGame, 3000);
                            } else {
                                // Lose condition
                                playSound('lose');
                                resultDisplay.textContent = 'ã‚‚ã†ä¸€åº¦ï¼';
                                resultDisplay.style.color = 'var(--warning)';
                                
                                // Shake animation
                                reels.forEach(reel => {
                                    reel.style.animation = 'shake 0.5s';
                                });
                                
                                setTimeout(hideFruitGame, 2000);
                            }
                        }, 300);
                    });
                });
            });
        }
        
        // Helper function to spin a single reel
        function spinReel(reel, delay, items, matchingItem, shouldMatch, callback) {
            const reelNumber = reel.id.replace('reel', '');
            const nameElement = document.getElementById(`name${reelNumber}`);
            
            setTimeout(() => {
                let spins = 0;
                const spinInterval = setInterval(() => {
                    // For the first few spins, show random items
                    if (spins < 10) {
                        const randomItem = items[Math.floor(Math.random() * items.length)];
                        reel.textContent = randomItem.emoji;
                        nameElement.textContent = '';
                    } 
                    // Then slow down to the final result
                    else if (spins < 15) {
                        if (spins % 2 === 0) {
                            const randomItem = items[Math.floor(Math.random() * items.length)];
                            reel.textContent = randomItem.emoji;
                            nameElement.textContent = '';
                        }
                    } 
                    // Final result
                    else {
                        clearInterval(spinInterval);
                        let finalItem;
                        if (shouldMatch) {
                            finalItem = matchingItem;
                        } else {
                            finalItem = items[Math.floor(Math.random() * items.length)];
                        }
                        reel.textContent = finalItem.emoji;
                        nameElement.textContent = finalItem.name;
                        
                        // Speak the name
                        if (window.speechSynthesis) {
                            const utterance = new SpeechSynthesisUtterance(finalItem.name);
                            utterance.lang = 'es-ES';
                            utterance.rate = 0.9;
                            window.speechSynthesis.speak(utterance);
                        }
                        
                        if (callback) callback();
                    }
                    spins++;
                }, 100);
            }, delay);
        }
        
        // Confetti effect for wins
        function createConfetti() {
            const container = document.querySelector('.fruit-game-container');
            if (!container) return;
            
            for (let i = 0; i < 100; i++) {
                const confetti = document.createElement('div');
                confetti.style.position = 'absolute';
                confetti.style.width = '10px';
                confetti.style.height = '10px';
                confetti.style.backgroundColor = `hsl(${Math.random() * 360}, 100%, 50%)`;
                confetti.style.borderRadius = '50%';
                confetti.style.left = `${Math.random() * 100}%`;
                confetti.style.top = '-10px';
                confetti.style.opacity = '0.8';
                confetti.style.transform = `rotate(${Math.random() * 360}deg)`;
                confetti.style.animation = `confetti-fall ${2 + Math.random() * 3}s linear forwards`;
                
                container.appendChild(confetti);
                
                // Remove confetti after animation
                setTimeout(() => {
                    confetti.remove();
                }, 5000);
            }
        }
        
        // Play sound effects
        function playSound(type) {
            if (!window.AudioContext) return;
            
            const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
            let oscillator = audioCtx.createOscillator();
            let gainNode = audioCtx.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(audioCtx.destination);
            
            // Different sounds for different events
            switch(type) {
                case 'spin':
                    // Continuous spinning sound
                    oscillator.type = 'sawtooth';
                    oscillator.frequency.setValueAtTime(200, audioCtx.currentTime);
                    oscillator.frequency.exponentialRampToValueAtTime(800, audioCtx.currentTime + 0.5);
                    gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.8);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.8);
                    break;
                    
                case 'reelStop':
                    // Short click when a reel stops
                    oscillator.type = 'square';
                    oscillator.frequency.setValueAtTime(1000, audioCtx.currentTime);
                    gainNode.gain.setValueAtTime(0.2, audioCtx.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.1);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.1);
                    break;
                    
                case 'win':
                    // Winning fanfare
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(523.25, audioCtx.currentTime); // C5
                    oscillator.frequency.setValueAtTime(659.25, audioCtx.currentTime + 0.1); // E5
                    oscillator.frequency.setValueAtTime(783.99, audioCtx.currentTime + 0.2); // G5
                    oscillator.frequency.setValueAtTime(1046.5, audioCtx.currentTime + 0.3); // C6
                    gainNode.gain.setValueAtTime(0.5, audioCtx.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.5);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.5);
                    break;
                    
                case 'lose':
                    // Sad trombone
                    oscillator.type = 'square';
                    oscillator.frequency.setValueAtTime(349.23, audioCtx.currentTime); // F4
                    oscillator.frequency.exponentialRampToValueAtTime(261.63, audioCtx.currentTime + 0.5); // C4
                    gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.6);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.6);
                    break;
                    
                case 'activate':
                    oscillator.type = 'sine';
                    oscillator.frequency.setValueAtTime(784, audioCtx.currentTime); // G5
                    oscillator.frequency.exponentialRampToValueAtTime(1046.5, audioCtx.currentTime + 0.2); // C6
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.3);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.3);
                    break;
                    
                case 'coin':
                    // Coin sound for wins
                    oscillator.type = 'triangle';
                    oscillator.frequency.setValueAtTime(988, audioCtx.currentTime); // B5
                    oscillator.frequency.exponentialRampToValueAtTime(1318, audioCtx.currentTime + 0.1); // E6
                    gainNode.gain.setValueAtTime(0.3, audioCtx.currentTime);
                    gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.2);
                    oscillator.start();
                    oscillator.stop(audioCtx.currentTime + 0.2);
                    break;
            }
        }

        // Initialize the app when the page loads
        window.addEventListener('DOMContentLoaded', function() {
            // Check for saved night mode preference
            const savedNightMode = localStorage.getItem('nightMode') === 'true';
            if (savedNightMode) {
                isNightMode = true;
                document.body.classList.add('dark-mode');
                nightModeToggle.textContent = 'â˜€ï¸';
            }
            
            init();
        });
    </script>
</body>
</html>
